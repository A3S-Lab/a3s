---
title: a3s-code
description: AI Coding Agent Documentation
---

# a3s-code

**a3s-code** is a production-ready AI coding agent framework built in Rust. It provides a complete gRPC-based service with 28+ RPCs for tool execution, multi-session management, and extensible integrations.

## Features

### Multi-Session Management

Run multiple independent AI conversations simultaneously, each with its own context and permissions.

```typescript
// Create isolated sessions for different tasks
const session1 = await client.createSession({ name: 'refactor', workspace: '/project' });
const session2 = await client.createSession({ name: 'debug', workspace: '/project' });
```

### Built-in Tools

8 core tools for file operations, code search, and command execution:

| Tool | Purpose |
|------|---------|
| `bash` | Execute shell commands |
| `read` | Read files with line numbers |
| `write` | Create/overwrite files |
| `edit` | String replacement editing |
| `grep` | Search file contents (ripgrep) |
| `glob` | Find files by pattern |
| `ls` | List directory contents |
| `web_fetch` | Fetch web content |

### Permission System

Control which tools the agent can use and when to ask for confirmation.

```typescript
await client.setPermissionPolicy(sessionId, {
  rules: [
    { tool: 'bash', action: 'ask' },      // Always ask before running commands
    { tool: 'read', action: 'allow' },    // Allow reading files
    { tool: 'write', action: 'deny' },    // Deny file writes
  ]
});
```

### Human-in-the-Loop (HITL)

Require user confirmation before executing sensitive operations.

```typescript
for await (const event of client.streamGenerate(sessionId, messages)) {
  if (event.confirmationRequest) {
    const { toolName, args, confirmationId } = event.confirmationRequest;
    await client.confirmToolExecution(sessionId, confirmationId, true);
  }
}
```

### Skills System

Extend the agent with custom tools defined in Markdown files.

Three backend types:
- **Binary**: Execute system commands (`jq`, `curl`, `git`)
- **HTTP**: Call REST APIs
- **Script**: Run inline scripts (bash, python, node)

### Subagent System

Delegate specialized tasks to focused child agents with isolated permissions.

| Agent | Permissions | Use Case |
|-------|-------------|----------|
| `explore` | read, grep, glob, ls | Find code, understand structure |
| `general` | all except task | Complex multi-step tasks |
| `plan` | read, grep, glob, ls | Design implementation approach |

### LSP Integration

Code intelligence features via Language Server Protocol.

```typescript
// Start language server
await client.startLspServer('rust', 'file:///path/to/project');

// Get hover information
const hover = await client.lspHover('/path/to/file.rs', 10, 5);

// Go to definition
const defs = await client.lspDefinition('/path/to/file.rs', 15, 10);
```

Supported: rust-analyzer, gopls, typescript-language-server, pyright, clangd

### MCP Support

Extend the agent with external tools via Model Context Protocol.

```typescript
// Register MCP server
await client.registerMcpServer({
  name: 'filesystem',
  command: 'npx',
  args: ['-y', '@modelcontextprotocol/server-filesystem'],
});

// Connect and load tools
await client.connectMcpServer('filesystem');
```

## Installation

```bash
# Build from source
cargo build --release

# Run server
./target/release/a3s-code --config ~/.a3s/config.json
```

## Configuration

Create `~/.a3s/config.json`:

```json
{
  "defaultProvider": "anthropic",
  "defaultModel": "claude-sonnet-4-20250514",
  "providers": [{
    "name": "anthropic",
    "apiKey": "sk-ant-...",
    "models": [{
      "id": "claude-sonnet-4-20250514",
      "name": "Claude Sonnet 4",
      "toolCall": true
    }]
  }]
}
```

## SDKs

### TypeScript

```bash
npm install @a3s-lab/code
```

```typescript
import { A3sClient } from '@a3s-lab/code';

const client = new A3sClient({ address: 'localhost:4088' });
const { sessionId } = await client.createSession({ workspace: '/project' });

for await (const event of client.streamGenerate(sessionId, [
  { role: 'user', content: 'Explain this codebase' }
])) {
  if (event.content) process.stdout.write(event.content);
}
```

### Python

```bash
pip install a3s-code
```

```python
from a3s_code import A3sClient

async with A3sClient(address="localhost:4088") as client:
    result = await client.create_session(workspace="/project")
    session_id = result["session_id"]

    async for event in client.stream_generate(session_id, [
        {"role": "user", "content": "Explain this codebase"}
    ]):
        if event.get("content"):
            print(event["content"], end="", flush=True)
```

## Links

- [GitHub Repository](https://github.com/A3S-Lab/Code)
- [crates.io](https://crates.io/crates/a3s-code)
