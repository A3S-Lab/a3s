---
title: Engines
description: Built-in search engines and the Engine trait for custom implementations
---

# Engines

A3S Search ships with 8 built-in engines and an `Engine` trait for adding custom search sources.

## Engine Trait

Every search engine implements this trait:

```rust
#[async_trait]
pub trait Engine: Send + Sync {
    /// Engine configuration (name, shortcut, weight, etc.)
    fn config(&self) -> &EngineConfig;

    /// Execute a search and return results
    async fn search(&self, query: &SearchQuery) -> Result<Vec<SearchResult>>;

    // Default implementations derived from config:
    fn name(&self) -> &str { &self.config().name }
    fn shortcut(&self) -> &str { &self.config().shortcut }
    fn weight(&self) -> f64 { self.config().weight }
    fn is_enabled(&self) -> bool { self.config().enabled }
}
```

## EngineConfig

```rust
pub struct EngineConfig {
    pub name: String,                      // Display name
    pub shortcut: String,                  // Short identifier (e.g., "ddg")
    pub categories: Vec<EngineCategory>,   // Supported categories
    pub weight: f64,                       // Ranking weight (default: 1.0)
    pub timeout: u64,                      // Timeout in seconds (default: 5)
    pub enabled: bool,                     // Whether engine is active
    pub paging: bool,                      // Supports pagination
    pub safesearch: bool,                  // Supports safe search filtering
}
```

## Built-in Engines

### DuckDuckGo

Privacy-focused search via HTML scraping. No API key required.

```rust
use a3s_search::engines::DuckDuckGo;
search.add_engine(DuckDuckGo::new());
```

| Property | Value |
|----------|-------|
| Shortcut | `ddg` |
| Weight | 1.0 |
| Method | HTTP / HTML scraping |
| Paging | Yes |
| SafeSearch | Yes |

### Brave Search

Independent search index. HTML scraping, no API key required.

```rust
use a3s_search::engines::Brave;
search.add_engine(Brave::new());
```

| Property | Value |
|----------|-------|
| Shortcut | `brave` |
| Weight | 1.0 |
| Method | HTTP / HTML scraping |
| Paging | Yes |
| SafeSearch | Yes |

### Wikipedia

MediaWiki JSON API. Higher weight due to authoritative content. Supports multi-language.

```rust
use a3s_search::engines::Wikipedia;

// Default (English)
search.add_engine(Wikipedia::new());

// Chinese Wikipedia
search.add_engine(Wikipedia::with_language("zh"));
```

| Property | Value |
|----------|-------|
| Shortcut | `wiki` |
| Weight | 1.2 |
| Method | HTTP / JSON API |
| Paging | No |
| SafeSearch | No |

### Sogou

Chinese search engine (搜狗搜索).

```rust
use a3s_search::engines::Sogou;
search.add_engine(Sogou::new());
```

| Property | Value |
|----------|-------|
| Shortcut | `sogou` |
| Weight | 1.0 |
| Method | HTTP / HTML scraping |
| Language | Chinese |

### 360 Search

Chinese search engine (360搜索).

```rust
use a3s_search::engines::So360;
search.add_engine(So360::new());
```

| Property | Value |
|----------|-------|
| Shortcut | `360` |
| Weight | 1.0 |
| Method | HTTP / HTML scraping |
| Language | Chinese |

### Google (headless)

Google Search via headless Chrome. Higher weight (1.5) due to result quality.

```rust
#[cfg(feature = "headless")]
use a3s_search::engines::Google;
search.add_engine(Google::new(fetcher));
```

| Property | Value |
|----------|-------|
| Shortcut | `g` |
| Weight | 1.5 |
| Method | Headless browser |
| Timeout | 10s |
| Paging | Yes |
| SafeSearch | Yes |

### Baidu (headless)

Chinese search engine (百度搜索) via headless Chrome.

```rust
#[cfg(feature = "headless")]
use a3s_search::engines::Baidu;
search.add_engine(Baidu::new(fetcher));
```

| Property | Value |
|----------|-------|
| Shortcut | `baidu` |
| Weight | 1.0 |
| Method | Headless browser |
| Language | Chinese |

### Bing China (headless)

Chinese Bing (必应中国) via headless Chrome.

```rust
#[cfg(feature = "headless")]
use a3s_search::engines::BingChina;
search.add_engine(BingChina::new(fetcher));
```

| Property | Value |
|----------|-------|
| Shortcut | `bing_cn` |
| Weight | 1.0 |
| Method | Headless browser |
| Language | Chinese |

## Custom Engine

Implement the `Engine` trait to add any search source:

```rust
use a3s_search::*;
use async_trait::async_trait;

struct MyApiEngine {
    config: EngineConfig,
    api_key: String,
}

impl MyApiEngine {
    fn new(api_key: String) -> Self {
        Self {
            config: EngineConfig {
                name: "My API".into(),
                shortcut: "myapi".into(),
                categories: vec![EngineCategory::General],
                weight: 1.0,
                timeout: 5,
                enabled: true,
                paging: true,
                safesearch: false,
            },
            api_key,
        }
    }
}

#[async_trait]
impl Engine for MyApiEngine {
    fn config(&self) -> &EngineConfig {
        &self.config
    }

    async fn search(&self, query: &SearchQuery) -> Result<Vec<SearchResult>> {
        let client = reqwest::Client::new();
        let resp = client
            .get("https://api.example.com/search")
            .query(&[("q", &query.query), ("key", &self.api_key)])
            .send()
            .await
            .map_err(SearchError::Http)?;

        let data: serde_json::Value = resp.json().await
            .map_err(SearchError::Http)?;

        let mut results = vec![];
        if let Some(items) = data["items"].as_array() {
            for (i, item) in items.iter().enumerate() {
                results.push(
                    SearchResult::new(
                        item["url"].as_str().unwrap_or_default(),
                        item["title"].as_str().unwrap_or_default(),
                        item["snippet"].as_str().unwrap_or_default(),
                    )
                    .with_engine("myapi", (i + 1) as u32)
                );
            }
        }

        Ok(results)
    }
}

// Register
search.add_engine(MyApiEngine::new("sk-...".into()));
```

## Engine Shortcuts

| Shortcut | Aliases | Engine |
|----------|---------|--------|
| `ddg` | `duckduckgo` | DuckDuckGo |
| `brave` | - | Brave Search |
| `wiki` | `wikipedia` | Wikipedia |
| `sogou` | - | Sogou |
| `360` | `so360` | 360 Search |
| `g` | `google` | Google |
| `baidu` | - | Baidu |
| `bing_cn` | `bing` | Bing China |
