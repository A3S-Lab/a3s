---
title: Queries
description: Construct search queries with filters, categories, language, and pagination
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { TypeTable } from 'fumadocs-ui/components/type-table';

# Queries

`SearchQuery` controls what to search for and how. All fields except `query` are optional.

## Basic Query

<Tabs groupId="lang" items={['Rust', 'Python', 'Node.js']}>
<Tab value="Rust">

```rust
use a3s_search::SearchQuery;

let query = SearchQuery::new("rust programming");
let results = search.search(query).await?;
```

</Tab>
<Tab value="Python">

```python
response = await search.search("rust programming")
```

</Tab>
<Tab value="Node.js">

```typescript
const response = await search.search('rust programming');
```

</Tab>
</Tabs>

## Search with Options

<Tabs groupId="lang" items={['Rust', 'Python', 'Node.js']}>
<Tab value="Rust">

```rust
use a3s_search::{SearchQuery, SafeSearch, TimeRange, EngineCategory};

let query = SearchQuery::new("rust async runtime")
    .with_categories(vec![EngineCategory::General])
    .with_language("en-US")
    .with_safesearch(SafeSearch::Moderate)
    .with_page(1)
    .with_time_range(TimeRange::Month)
    .with_engines(vec!["ddg".into(), "brave".into(), "bing".into()]);
```

`SearchQuery` builder methods:

<TypeTable
  type={
    {`\`new(query)\``}: {
      description: "Create a new query",
    },
    {`\`with_categories(cats)\``}: {
      description: "Set target categories",
    },
    {`\`with_language(lang)\``}: {
      description: "Set language/locale",
    },
    {`\`with_safesearch(level)\``}: {
      description: "Set safe search level",
    },
    {`\`with_page(page)\``}: {
      description: "Set page number",
    },
    {`\`with_time_range(range)\``}: {
      description: "Set time range filter",
    },
    {`\`with_engines(engines)\``}: {
      description: "Limit to specific engine shortcuts",
    },
  }
/>

</Tab>
<Tab value="Python">

```python
response = await search.search("rust async runtime",
    engines=["ddg", "brave", "bing"],
    limit=5,
    timeout=15,
)
```

SDK search options:

<TypeTable
  type={{
    engines: { type: 'list[str]', description: 'Engine shortcuts to use' },
    limit: { type: 'int', description: 'Max results to return' },
    timeout: { type: 'int', description: 'Per-engine timeout in seconds' },
    proxy: { type: 'str', description: 'Single proxy URL' },
    proxy_pool: { type: 'list[str]', description: 'Proxy pool URLs for this request' },
  }}
/>

</Tab>
<Tab value="Node.js">

```typescript
const response = await search.search('rust async runtime', {
  engines: ['ddg', 'brave', 'bing'],
  limit: 5,
  timeout: 15,
});
```

SDK search options:

<TypeTable
  type={{
    engines: { type: 'string[]', description: 'Engine shortcuts to use' },
    limit: { type: 'number', description: 'Max results to return' },
    timeout: { type: 'number', description: 'Per-engine timeout in seconds' },
    proxy: { type: 'string', description: 'Single proxy URL' },
    proxyPool: { type: 'string[]', description: 'Proxy pool URLs for this request' },
  }}
/>

</Tab>
</Tabs>

## Target Specific Engines

<Tabs groupId="lang" items={['Rust', 'Python', 'Node.js']}>
<Tab value="Rust">

```rust
// Only DuckDuckGo and Bing
let query = SearchQuery::new("rust")
    .with_engines(vec!["ddg".into(), "bing".into()]);

// Only Chinese engines
let query = SearchQuery::new("Rust 编程")
    .with_engines(vec!["sogou".into(), "360".into()]);
```

Engines not in the list are skipped for this query. If `with_engines` is not called, all registered engines are queried.

</Tab>
<Tab value="Python">

```python
# International engines
response = await search.search("rust", engines=["ddg", "brave", "bing", "wiki"])

# Chinese engines
response = await search.search("Rust 编程", engines=["sogou", "360"])
```

</Tab>
<Tab value="Node.js">

```typescript
// International engines
const response = await search.search('rust', {
  engines: ['ddg', 'brave', 'bing', 'wiki'],
});

// Chinese engines
const response2 = await search.search('Rust 编程', {
  engines: ['sogou', '360'],
});
```

</Tab>
</Tabs>

## A3SSearch API (Python / Node.js)

<Tabs groupId="lang" items={['Python', 'Node.js']}>
<Tab value="Python">

<TypeTable
  type={
    {`\`search\``}: {
      description: {`Signature: \`(query, *, engines?, limit?, timeout?, proxy?, proxy_pool?) → SearchResponse\` · Description: Run a search`},
    },
    {`\`set_proxy_pool\``}: {
      description: {`Signature: \`(proxies: list[str]) → None\` · Description: Set instance-level proxy pool`},
    },
    {`\`set_proxy_pool_enabled\``}: {
      description: {`Signature: \`(enabled: bool) → None\` · Description: Enable or disable proxy rotation`},
    },
    {`\`is_proxy_pool_enabled\``}: {
      description: {`Signature: \`() → bool\` · Description: Check if proxy pool is active`},
    },
    {`\`proxy_pool_size\``}: {
      description: {`Signature: \`() → int\` · Description: Number of proxies in pool`},
    },
  }
/>

All methods are `async` except `set_proxy_pool_enabled` and `is_proxy_pool_enabled`.

</Tab>
<Tab value="Node.js">

<TypeTable
  type={
    {`\`search\``}: {
      description: {`Signature: \`(query: string, options?: SearchOptions) => Promise<SearchResponse>\` · Description: Run a search`},
    },
    {`\`setProxyPool\``}: {
      description: {`Signature: \`(urls: string[]) => Promise<void>\` · Description: Set instance-level proxy pool`},
    },
    {`\`setProxyPoolEnabled\``}: {
      description: {`Signature: \`(enabled: boolean) => void\` · Description: Enable or disable proxy rotation`},
    },
    {`\`isProxyPoolEnabled\``}: {
      description: {`Signature: \`() => boolean\` · Description: Check if proxy pool is active`},
    },
    {`\`proxyPoolSize\``}: {
      description: {`Signature: \`() => Promise<number>\` · Description: Number of proxies in pool`},
    },
  }
/>

</Tab>
</Tabs>

## Categories

```rust
pub enum EngineCategory {
    General,
    Images,
    News,
    Videos,
    Science,
}
```

Engines declare which categories they support via `EngineConfig.categories`. When a query specifies categories, only engines matching those categories are queried.

## Safe Search

```rust
pub enum SafeSearch {
    Off,
    Moderate,
    Strict,
}
```

Only engines with `safesearch: true` in their config respect this setting. Currently supported by DuckDuckGo, Brave, Bing, and Google.

## Time Range

```rust
pub enum TimeRange {
    Day,
    Week,
    Month,
    Year,
}
```

Filters results by recency. Engine support varies.

## Pagination

<Tabs groupId="lang" items={['Rust', 'Python', 'Node.js']}>
<Tab value="Rust">

```rust
let page1 = SearchQuery::new("rust").with_page(1);
let page2 = SearchQuery::new("rust").with_page(2);
```

Only engines with `paging: true` support pagination (DuckDuckGo, Brave, Bing, Google).

</Tab>
<Tab value="Python">

```python
# Python SDK does not expose a page parameter directly.
# Use the Rust crate for paginated queries.
```

</Tab>
<Tab value="Node.js">

```typescript
// Node.js SDK does not expose a page parameter directly.
// Use the Rust crate for paginated queries.
```

</Tab>
</Tabs>
