---
title: Engines
description: 9 built-in search engines and the Engine trait for custom implementations
---

import { TypeTable } from 'fumadocs-ui/components/type-table';

# Engines

A3S Search ships with 9 built-in engines and an `Engine` trait for adding custom search sources.

## Engine Trait

Every search engine implements this trait:

```rust
#[async_trait]
pub trait Engine: Send + Sync {
    fn config(&self) -> &EngineConfig;
    async fn search(&self, query: &SearchQuery) -> Result<Vec<SearchResult>>;

    // Default implementations derived from config:
    fn name(&self) -> &str { &self.config().name }
    fn shortcut(&self) -> &str { &self.config().shortcut }
    fn weight(&self) -> f64 { self.config().weight }
    fn is_enabled(&self) -> bool { self.config().enabled }
}
```

## EngineConfig

<TypeTable
  type={{
    name: { type: 'String', required: true, description: 'Display name' },
    shortcut: { type: 'String', required: true, description: 'Short identifier (e.g., `ddg`)' },
    categories: { type: 'Vec<EngineCategory>', default: '[General]', description: 'Supported categories' },
    weight: { type: 'f64', default: '1.0', description: 'Ranking weight multiplier' },
    timeout: { type: 'u64', default: '5', description: 'Timeout in seconds' },
    enabled: { type: 'bool', default: 'true', description: 'Whether engine is active' },
    paging: { type: 'bool', default: 'false', description: 'Supports pagination' },
    safesearch: { type: 'bool', default: 'false', description: 'Supports safe search filtering' },
  }}
/>

## Built-in Engines

### DuckDuckGo

Privacy-focused search via HTML scraping. No API key required.

```rust
use a3s_search::engines::DuckDuckGo;
search.add_engine(DuckDuckGo::new());
```

<TypeTable
  type={
    "Shortcut": {
      description: "ddg",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "HTTP / HTML scraping",
    },
    "Paging": {
      description: "Yes",
    },
    "SafeSearch": {
      description: "Yes",
    },
  }
/>

### Brave Search

Independent search index. HTML scraping, no API key required.

```rust
use a3s_search::engines::Brave;
search.add_engine(Brave::new());
```

<TypeTable
  type={
    "Shortcut": {
      description: "brave",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "HTTP / HTML scraping",
    },
    "Paging": {
      description: "Yes",
    },
    "SafeSearch": {
      description: "Yes",
    },
  }
/>

### Bing

Bing International via HTML scraping with query parameter extraction.

```rust
use a3s_search::engines::Bing;
search.add_engine(Bing::new());
```

<TypeTable
  type={
    "Shortcut": {
      description: "bing",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "HTTP / HTML scraping",
    },
    "Paging": {
      description: "Yes",
    },
    "SafeSearch": {
      description: "Yes",
    },
  }
/>

### Wikipedia

MediaWiki JSON API. Higher weight due to authoritative content. Supports multi-language.

```rust
use a3s_search::engines::Wikipedia;

// Default (English)
search.add_engine(Wikipedia::new());

// Chinese Wikipedia
search.add_engine(Wikipedia::with_language("zh"));
```

<TypeTable
  type={
    "Shortcut": {
      description: "wiki",
    },
    "Weight": {
      description: "1.2",
    },
    "Method": {
      description: "HTTP / JSON API",
    },
    "Paging": {
      description: "No",
    },
    "SafeSearch": {
      description: "No",
    },
  }
/>

### Sogou

Chinese search engine (搜狗搜索).

```rust
use a3s_search::engines::Sogou;
search.add_engine(Sogou::new());
```

<TypeTable
  type={
    "Shortcut": {
      description: "sogou",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "HTTP / HTML scraping",
    },
    "Language": {
      description: "Chinese",
    },
  }
/>

### 360 Search

Chinese search engine (360搜索).

```rust
use a3s_search::engines::So360;
search.add_engine(So360::new());
```

<TypeTable
  type={
    "Shortcut": {
      description: "360",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "HTTP / HTML scraping",
    },
    "Language": {
      description: "Chinese",
    },
  }
/>

### Google (headless)

Google Search via headless Chrome. Higher weight (1.5) due to result quality.

```rust
#[cfg(feature = "headless")]
use a3s_search::engines::Google;
search.add_engine(Google::new(fetcher));
```

<TypeTable
  type={
    "Shortcut": {
      description: "g",
    },
    "Weight": {
      description: "1.5",
    },
    "Method": {
      description: "Headless browser",
    },
    "Paging": {
      description: "Yes",
    },
    "SafeSearch": {
      description: "Yes",
    },
  }
/>

### Baidu (headless)

Chinese search engine (百度搜索) via headless Chrome.

```rust
#[cfg(feature = "headless")]
use a3s_search::engines::Baidu;
search.add_engine(Baidu::new(fetcher));
```

<TypeTable
  type={
    "Shortcut": {
      description: "baidu",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "Headless browser",
    },
    "Language": {
      description: "Chinese",
    },
  }
/>

### Bing China (headless)

Chinese Bing (必应中国) via headless Chrome.

```rust
#[cfg(feature = "headless")]
use a3s_search::engines::BingChina;
search.add_engine(BingChina::new(fetcher));
```

<TypeTable
  type={
    "Shortcut": {
      description: "bing_cn",
    },
    "Weight": {
      description: "1.0",
    },
    "Method": {
      description: "Headless browser",
    },
    "Language": {
      description: "Chinese",
    },
  }
/>

## Engine Shortcuts

<TypeTable
  type={
    "ddg": {
      description: {`Aliases: \`duckduckgo\` · Engine: DuckDuckGo · Method: HTTP`},
    },
    "brave": {
      description: "Engine: Brave Search · Method: HTTP",
    },
    "bing": {
      description: "Engine: Bing International · Method: HTTP",
    },
    "wiki": {
      description: {`Aliases: \`wikipedia\` · Engine: Wikipedia · Method: JSON API`},
    },
    "sogou": {
      description: "Engine: Sogou · Method: HTTP",
    },
    "360": {
      description: {`Aliases: \`so360\` · Engine: 360 Search · Method: HTTP`},
    },
    "g": {
      description: {`Aliases: \`google\` · Engine: Google · Method: Headless`},
    },
    "baidu": {
      description: "Engine: Baidu · Method: Headless",
    },
    "bing_cn": {
      description: "Engine: Bing China · Method: Headless",
    },
  }
/>

## Custom Engine

Implement the `Engine` trait to add any search source:

```rust
use a3s_search::*;
use async_trait::async_trait;

struct MyApiEngine {
    config: EngineConfig,
    api_key: String,
}

impl MyApiEngine {
    fn new(api_key: String) -> Self {
        Self {
            config: EngineConfig {
                name: "My API".into(),
                shortcut: "myapi".into(),
                categories: vec![EngineCategory::General],
                weight: 1.0,
                timeout: 5,
                enabled: true,
                paging: true,
                safesearch: false,
            },
            api_key,
        }
    }
}

#[async_trait]
impl Engine for MyApiEngine {
    fn config(&self) -> &EngineConfig { &self.config }

    async fn search(&self, query: &SearchQuery) -> Result<Vec<SearchResult>> {
        let client = reqwest::Client::new();
        let resp: serde_json::Value = client
            .get("https://api.example.com/search")
            .query(&[("q", &query.query), ("key", &self.api_key)])
            .send().await.map_err(SearchError::Http)?
            .json().await.map_err(SearchError::Http)?;

        let mut results = vec![];
        if let Some(items) = resp["items"].as_array() {
            for (i, item) in items.iter().enumerate() {
                results.push(
                    SearchResult::new(
                        item["url"].as_str().unwrap_or_default(),
                        item["title"].as_str().unwrap_or_default(),
                        item["snippet"].as_str().unwrap_or_default(),
                    )
                    .with_engine("myapi", (i + 1) as u32)
                );
            }
        }
        Ok(results)
    }
}
```

## Custom Engine Weight

Override the default weight for any built-in engine:

```rust
use a3s_search::{EngineConfig, engines::Wikipedia};

let wiki = Wikipedia::new().with_config(EngineConfig {
    name: "Wikipedia".to_string(),
    shortcut: "wiki".to_string(),
    weight: 1.5,
    ..Default::default()
});
search.add_engine(wiki);
```
