---
title: Relevance Scoring
description: How memories are ranked — importance, recency decay, and RelevanceConfig
---

import { TypeTable } from 'fumadocs-ui/components/type-table';

# Relevance Scoring

When searching or injecting memories into context, each item is scored by combining importance and recency:

```
score = importance × importance_weight + exp(−age_days / decay_days) × recency_weight
```

## RelevanceConfig

<TypeTable
  type={{
    importance_weight: { type: 'f32', default: '0.7', description: 'Weight of the importance factor' },
    recency_weight: { type: 'f32', default: '0.3', description: 'Weight of the recency factor' },
    decay_days: { type: 'f32', default: '30.0', description: 'Days for recency factor to decay to ~37%' },
  }}
/>

```rust
use a3s_memory::{MemoryItem, RelevanceConfig};

let config = RelevanceConfig {
    decay_days: 7.0,
    importance_weight: 0.9,
    recency_weight: 0.1,
};

let score = item.relevance_score_at(chrono::Utc::now(), &config);
```

`relevance_score()` is a convenience method that uses `RelevanceConfig::default()`.

## Decay behavior

<TypeTable
  type={
    "0 days": {
      description: "1.00",
    },
    "30 days": {
      description: "0.37",
    },
    "60 days": {
      description: "0.14",
    },
    "90 days": {
      description: "0.05",
    },
  }
/>

A high-importance item (`importance = 1.0`) with default weights scores:
- Fresh: `0.7 × 1.0 + 0.3 × 1.0 = 1.0`
- After 90 days: `0.7 × 1.0 + 0.3 × 0.05 ≈ 0.72`

A low-importance item (`importance = 0.1`) decays much faster in practice because the importance floor is low.

## Tuning guidance

<TypeTable
  type={
    "Long-lived assistant": {
      description: {`\`decay_days: 365\`, \`importance_weight: 0.9\``},
    },
    "Short coding session": {
      description: {`\`decay_days: 1\`, \`recency_weight: 0.7\``},
    },
    "Equal weight": {
      description: {`\`importance_weight: 0.5\`, \`recency_weight: 0.5\``},
    },
  }
/>
