---
title: Examples
description: Integration test examples for Rust, Python, and Node.js SDKs
---

# Examples

A3S Code provides comprehensive integration test examples for all three SDKs: Rust (core library), Python, and Node.js. These examples demonstrate real-world usage patterns and can be used as templates for your own applications.

## Overview

All examples use real LLM configuration from `~/.a3s/config.hcl` and test the same core features across all three SDKs:

- **Basic tool execution** - File operations, shell commands
- **Search operations** - Grep, glob pattern matching
- **Direct tool calls** - Bypass LLM for direct tool execution
- **Streaming execution** - Real-time event streaming
- **Queue configuration** - A3S Lane v0.4.0 advanced features
- **Conversation history** - Multi-turn conversations

## Rust Examples

Location: `crates/code/core/examples/`

### Integration Tests

**File:** `integration_tests.rs`

Complete feature test suite covering all major A3S Code v0.8.0 features.

```rust
use a3s_code_core::{Agent, SessionOptions};
use anyhow::Result;

#[tokio::main]
async fn main() -> Result<()> {
    // Load config from ~/.a3s/config.hcl
    let config_path = dirs::home_dir()
        .map(|h| h.join(".a3s/config.hcl"))
        .filter(|p| p.exists())
        .expect("Config file not found");

    let agent = Agent::new(config_path.to_str().unwrap()).await?;
    let session = agent.session(".", None)?;

    // Send a prompt
    let result = session.send("List all Rust files", None).await?;
    println!("Result: {}", result.text);

    Ok(())
}
```

**Run:**
```bash
cd crates/code/core
cargo run --example integration_tests
```

### Lane Features Test

**File:** `test_lane_features.rs`

Tests A3S Lane v0.4.0 advanced queue features.

```rust
use a3s_code_core::queue::{SessionQueueConfig, RetryPolicyConfig};

let queue_config = SessionQueueConfig {
    query_max_concurrency: 5,
    execute_max_concurrency: 2,
    enable_metrics: true,
    enable_dlq: true,
    retry_policy: Some(RetryPolicyConfig {
        strategy: "exponential".to_string(),
        max_retries: 3,
        initial_delay_ms: 100,
        fixed_delay_ms: None,
    }),
    ..Default::default()
};

let session = agent.session(".", Some(
    SessionOptions::new().with_queue_config(queue_config)
))?;
```

**Run:**
```bash
cargo run --example test_lane_features
```

### Search Configuration Test

**File:** `test_search_config.rs`

Tests A3S Search v0.7.0 configurable web search.

```rust
let config_hcl = r#"
    default_model = "openai/gpt-4o"

    providers { ... }

    search {
        timeout = 30

        engine {
            ddg {
                enabled = true
                weight = 1.5
            }
            wiki {
                enabled = true
                weight = 1.2
            }
        }
    }
"#;

let agent = Agent::new(config_hcl).await?;
```

**Run:**
```bash
cargo run --example test_search_config
```

### Built-in Skills Test

**File:** `test_builtin_skills.rs`

Tests all 7 built-in skills individually.

```rust
let session = agent.session(".", Some(
    SessionOptions::new().with_builtin_skills()
))?;

// Test code-search skill
let result = session.send(
    "Search for all functions named 'new' in Rust files",
    None
).await?;
```

**Run:**
```bash
cargo run --example test_builtin_skills
```

## Python Examples

Location: `crates/code/sdk/python/examples/`

### Integration Tests

**File:** `integration_tests.py`

Complete Python SDK test suite with 8 tests.

```python
from a3s_code import Agent, SessionQueueConfig, builtin_skills

# Create agent from config file
agent = Agent.create("~/.a3s/config.hcl")

# Create session
session = agent.session(".")

# Send a prompt
result = session.send("List all Python files")
print(result.text)

# Stream events
for event in session.stream("What is this project?"):
    if event.event_type == "text_delta":
        print(event.text, end="", flush=True)

# Direct tool calls
content = session.read_file("README.md")
files = session.glob("*.py")
output = session.bash("ls -la")
```

**Run:**
```bash
cd crates/code/sdk/python
pip install -e .
python examples/integration_tests.py
```

### Built-in Skills

```python
from a3s_code import Agent, builtin_skills

# List available skills
skills = builtin_skills()
print(f"Available skills: {len(skills)}")
for skill in skills:
    print(f"  - {skill.name} ({skill.kind}): {skill.description}")

# Create session with builtin skills enabled
agent = Agent.create("~/.a3s/config.hcl")
session = agent.session(".", builtin_skills=True)

# Use code-search skill
result = session.send("Search for all functions named 'new' in Rust files")
print(result.text)

# Use builtin-tools skill
result = session.send("What tools are available for file operations?")
print(result.text)
```

**Available Skills:**
- **code-search** - Search codebase for patterns, functions, or types
- **code-review** - Review code for best practices and improvements
- **explain-code** - Explain how code works in clear terms
- **find-bugs** - Identify potential bugs and vulnerabilities
- **builtin-tools** - Documentation for built-in tools
- **delegate-task** - Guide for delegating tasks to sub-agents
- **find-skills** - Discover and install agent skills

### Queue Configuration

```python
# Configure A3S Lane queue
queue_config = SessionQueueConfig()
queue_config.set_query_concurrency(5)
queue_config.set_execute_concurrency(2)
queue_config.enable_dlq()
queue_config.enable_metrics()

session = agent.session(".", queue_config=queue_config)

# Check queue status
if session.has_queue():
    stats = session.queue_stats()
    print(f"Queue stats: {stats}")
```

### Web Search Configuration

**File:** `test_search_config.py`

Configure A3S Search v0.7.0 engines via HCL and test with real LLM.

```python
from a3s_code import Agent

# Create agent with inline HCL config including search configuration
config_hcl = """
    default_model = "openai/gpt-4o"

    providers {
      name = "openai"
      models {
        id = "gpt-4o"
        # ... model config ...
      }
    }

    # Custom search configuration
    search {
      timeout = 30

      health {
        max_failures = 3
        suspend_seconds = 60
      }

      engine {
        ddg {
          enabled = true
          weight = 1.5
        }

        wiki {
          enabled = true
          weight = 1.2
        }

        brave {
          enabled = true
          weight = 1.0
          timeout = 20
        }
      }
    }
"""

# Create agent and session with search config
agent = Agent.create(config_hcl)
session = agent.session(".")

# Test web search with custom configuration
result = session.send("Search for 'Rust tokio tutorial' and summarize the findings")
print(result.text)
```

**Run:**
```bash
python examples/test_search_config.py
```

### Conversation History

```python
# Multi-turn conversation
session = agent.session(".")

result1 = session.send("What is 2 + 2?")
result2 = session.send("What was my previous question?")

# Access history
history = session.history()
print(f"History has {len(history)} messages")
```

## Node.js Examples

Location: `crates/code/sdk/node/examples/`

### Integration Tests

**File:** `integration_tests.js`

Complete Node.js SDK test suite with 8 tests.

```javascript
const { Agent, builtinSkills } = require('@a3s/code');

async function main() {
  // Create agent from config file
  const agent = await Agent.create('~/.a3s/config.hcl');

  // Create session
  const session = agent.session('.');

  // Send a prompt
  const result = await session.send('List all JavaScript files');
  console.log(result.text);

  // Stream events
  const events = await session.stream('What is this project?');
  for (const event of events) {
    if (event.type === 'text_delta') {
      process.stdout.write(event.text);
    }
  }

  // Direct tool calls
  const content = await session.readFile('package.json');
  const files = await session.glob('*.js');
  const output = await session.bash('ls -la');
}

main();
```

**Run:**
```bash
cd crates/code/sdk/node
npm install
npm run build
node examples/integration_tests.js
```

### Built-in Skills

```javascript
const { Agent, builtinSkills } = require('@a3s/code');

// List available skills
const skills = builtinSkills();
console.log(`Available skills: ${skills.length}`);
skills.forEach(skill => {
  console.log(`  - ${skill.name} (${skill.kind}): ${skill.description}`);
});

// Create session with builtin skills enabled
const agent = await Agent.create('~/.a3s/config.hcl');
const session = agent.session('.', { builtinSkills: true });

// Use code-search skill
const result1 = await session.send('Search for all functions named "new" in Rust files');
console.log(result1.text);

// Use builtin-tools skill
const result2 = await session.send('What tools are available for file operations?');
console.log(result2.text);
```

**Available Skills:**
- **code-search** - Search codebase for patterns, functions, or types
- **code-review** - Review code for best practices and improvements
- **explain-code** - Explain how code works in clear terms
- **find-bugs** - Identify potential bugs and vulnerabilities
- **builtin-tools** - Documentation for built-in tools
- **delegate-task** - Guide for delegating tasks to sub-agents
- **find-skills** - Discover and install agent skills

### Queue Configuration

```javascript
// Create session with queue configuration
const session = agent.session('.', {
  queueConfig: {
    queryConcurrency: 5,
    executeConcurrency: 2,
    enableDlq: true,
    enableMetrics: true,
    enableAllFeatures: false
  }
});

const result = await session.send('List all .rs files and count how many contain "async"');
console.log(result.text);
```

### Web Search Configuration

**File:** `test_search_config.js`

Configure A3S Search v0.7.0 engines via HCL and test with real LLM.

```javascript
const { Agent } = require('@a3s/code');

// Create agent with inline HCL config including search configuration
const configHcl = `
  default_model = "openai/gpt-4o"

  providers {
    name = "openai"
    models {
      id = "gpt-4o"
      # ... model config ...
    }
  }

  # Custom search configuration
  search {
    timeout = 30

    health {
      max_failures = 3
      suspend_seconds = 60
    }

    engine {
      ddg {
        enabled = true
        weight = 1.5
      }

      wiki {
        enabled = true
        weight = 1.2
      }

      brave {
        enabled = true
        weight = 1.0
        timeout = 20
      }
    }
  }
`;

// Create agent and session with search config
const agent = await Agent.create(configHcl);
const session = agent.session('.');

// Test web search with custom configuration
const result = await session.send("Search for 'Rust tokio tutorial' and summarize the findings");
console.log(result.text);
```

**Run:**
```bash
node examples/test_search_config.js
```

### Session Options

```javascript
// Create session with custom options
const session = agent.session('.', {
  model: 'openai/gpt-4o',      // Override default model
  builtinSkills: true,         // Enable built-in skills
  skillDirs: ['./skills'],     // Custom skill directories
  agentDirs: ['./agents'],     // Custom agent directories
  queueConfig: { /* ... */ }   // Queue configuration
});
```

### TypeScript Support

```typescript
import { Agent, AgentResult, SessionOptions } from '@a3s/code';

async function main() {
  const agent = await Agent.create('~/.a3s/config.hcl');

  const options: SessionOptions = {
    model: 'openai/gpt-4o',
    builtinSkills: true
  };

  const session = agent.session('.', options);
  const result: AgentResult = await session.send('Hello!');

  console.log(`Response: ${result.text}`);
  console.log(`Tokens: ${result.totalTokens}`);
  console.log(`Tool calls: ${result.toolCallsCount}`);
}
```

## Configuration

All examples require a configuration file at `~/.a3s/config.hcl`:

```hcl
default_model = "openai/gpt-4o"

providers {
  name = "openai"

  models {
    id          = "gpt-4o"
    name        = "GPT-4o"
    family      = "gpt"
    api_key     = "your-api-key-here"
    base_url    = "https://api.openai.com/v1"
    attachment  = false
    reasoning   = false
    tool_call   = true
    temperature = true

    modalities {
      input  = ["text"]
      output = ["text"]
    }

    limit {
      context = 128000
      output  = 4096
    }
  }
}

# Optional: Configure web search
search {
  timeout = 30

  engine {
    ddg {
      enabled = true
      weight = 1.5
    }
    wiki {
      enabled = true
      weight = 1.2
    }
  }
}
```

## Running All Tests

### Rust

```bash
cd crates/code/core
cargo run --example integration_tests
cargo run --example test_lane_features
cargo run --example test_search_config
cargo run --example test_builtin_skills
```

### Python

```bash
cd crates/code/sdk/python
pip install -e .
python examples/integration_tests.py
```

### Node.js

```bash
cd crates/code/sdk/node
npm install && npm run build
node examples/integration_tests.js
```

## Test Coverage

| Feature | Rust | Python | Node.js |
|---------|------|--------|---------|
| Basic tools | ✅ | ✅ | ✅ |
| Built-in skills | ✅ | ✅ | ✅ |
| File operations | ✅ | ✅ | ✅ |
| Search operations | ✅ | ✅ | ✅ |
| Direct tool calls | ✅ | ✅ | ✅ |
| Streaming | ✅ | ✅ | ✅ |
| Queue config | ✅ | ✅ | ✅ |
| Web search config | ✅ | ✅ | ✅ |
| Conversation history | ✅ | ✅ | ✅ |

**All features now fully covered across all three SDKs!**

## Troubleshooting

### Config file not found

**Error:**
```
Config file not found. Please create ~/.a3s/config.hcl
```

**Solution:**
Create `~/.a3s/config.hcl` with your LLM configuration.

### API key errors

**Error:**
```
Failed to authenticate with LLM provider
```

**Solution:**
1. Check your API key in `config.hcl`
2. Ensure the API key is valid and has sufficient credits
3. Verify the `base_url` is correct

### Build errors (Rust)

**Error:**
```
error: could not compile `a3s-code-core`
```

**Solution:**
```bash
cargo clean
cargo build --examples
```

### Import errors (Python)

**Error:**
```
ModuleNotFoundError: No module named 'a3s_code'
```

**Solution:**
```bash
pip install -e .
```

### Module not found (Node.js)

**Error:**
```
Error: Cannot find module '@a3s/code'
```

**Solution:**
```bash
npm run build
```

## Next Steps

- [Sessions](/docs/code/sessions) - Learn about session management
- [Tools](/docs/code/tools) - Explore available tools
- [Skills](/docs/code/skills) - Understand the skill system
- [Lane Queue](/docs/code/lane-queue) - Configure advanced queue features
