---
title: Planning & Goals
description: Create execution plans and track goal achievement
---

# Planning & Goals

A3S Code includes a JSON-structured planning system (`LlmPlanner`) that decomposes complex tasks into structured execution plans, and a goal tracker that monitors progress toward completion.

## Execution Plans

When the agent receives a complex task, the planning system can decompose it into ordered steps before execution begins. This improves reliability for multi-step tasks.

### Plan Structure

```
ExecutionPlan
├── goal: "Refactor auth module to use JWT"
├── tasks:
│   ├── 1. Analyze current auth implementation     [Completed]
│   ├── 2. Design JWT token structure              [InProgress]
│   ├── 3. Implement JWT generation and validation [Pending]
│   ├── 4. Update middleware to use JWT            [Pending]
│   ├── 5. Update tests                           [Pending]
│   └── 6. Verify all tests pass                  [Pending]
└── context: current file structure, dependencies
```

### Task Model

Each step in the plan is a unified `Task` with the following fields:

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Unique task identifier |
| `title` | string | Short task description |
| `description` | string | Detailed task description |
| `status` | TaskStatus | Current task status |
| `priority` | enum | `high`, `medium`, `low` |
| `dependencies` | string[] | Task IDs that must complete first |
| `created_at` | timestamp | When the task was created |
| `completed_at` | timestamp | When the task was completed |

### TaskStatus

| Status | Description |
|--------|-------------|
| `Pending` | Not yet started |
| `InProgress` | Currently being executed |
| `Completed` | Successfully finished |
| `Failed` | Execution failed |
| `Skipped` | Skipped (dependency failed or no longer needed) |
| `Cancelled` | Manually cancelled |

### Strategy Selection

The planning system selects an execution strategy based on task complexity:

| Strategy | When Used |
|----------|-----------|
| `DIRECT` | Simple tasks — single generation, no planning needed |
| `ITERATIVE` | Default — generate → tool → reflect → repeat |
| `PLANNED` | Complex tasks — create plan first, then execute steps |
| `PARALLEL` | Independent subtasks — parallel tool execution |

The `AUTO` strategy uses task analysis to dynamically select the best approach.

## Goal Tracking

The goal tracker extracts a measurable goal from the user's prompt and monitors progress throughout execution.

### Goal Extraction

```
User prompt: "Add input validation to all API endpoints"
  │
  ├── Goal: "All API endpoints validate their input parameters"
  ├── Success criteria:
  │   ├── Each endpoint has validation middleware
  │   ├── Invalid input returns 400 with error details
  │   └── Tests cover validation edge cases
  └── Completion: 0% → 33% → 66% → 100%
```

### Progress Monitoring

After each agent turn, the goal tracker evaluates:

1. **Current state** — what has been accomplished so far
2. **Remaining work** — what steps are still needed
3. **Completion estimate** — percentage toward the goal
4. **Blockers** — any issues preventing progress

This feeds into the agent loop's decision-making, helping the agent stay focused on the original task and avoid scope creep.
