---
title: LSP Integration
description: Code intelligence via Language Server Protocol
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';

# LSP Integration

A3S Code integrates with Language Server Protocol (LSP) servers to provide code intelligence. LSP tools are automatically registered in the ToolExecutor when a server starts.

## Supported Languages

| Language | Server |
|----------|--------|
| Rust | rust-analyzer |
| Go | gopls |
| TypeScript/JavaScript | typescript-language-server |
| Python | pyright |
| C/C++ | clangd |

## Start a Language Server

<Tabs groupId="lang" items={['TypeScript', 'Python']}>
<Tab value="TypeScript">
```typescript
await client.startLspServer('rust', 'file:///path/to/project');
```
</Tab>
<Tab value="Python">
```python
await client.start_lsp_server("rust", "file:///path/to/project")
```
</Tab>
</Tabs>

## Available Operations

### Hover

Get type information and documentation at a position:

<Tabs groupId="lang" items={['TypeScript', 'Python']}>
<Tab value="TypeScript">
```typescript
const hover = await client.lspHover('/path/to/file.rs', 10, 5);
```
</Tab>
<Tab value="Python">
```python
hover = await client.lsp_hover("/path/to/file.rs", 10, 5)
```
</Tab>
</Tabs>

### Go to Definition

Find where a symbol is defined:

<Tabs groupId="lang" items={['TypeScript', 'Python']}>
<Tab value="TypeScript">
```typescript
const defs = await client.lspDefinition('/path/to/file.rs', 15, 10);
```
</Tab>
<Tab value="Python">
```python
defs = await client.lsp_definition("/path/to/file.rs", 15, 10)
```
</Tab>
</Tabs>

### Find References

Find all usages of a symbol:

<Tabs groupId="lang" items={['TypeScript', 'Python']}>
<Tab value="TypeScript">
```typescript
const refs = await client.lspReferences('/path/to/file.rs', 20, 8);
```
</Tab>
<Tab value="Python">
```python
refs = await client.lsp_references("/path/to/file.rs", 20, 8)
```
</Tab>
</Tabs>

### Workspace Symbols

Search for symbols across the workspace:

<Tabs groupId="lang" items={['TypeScript', 'Python']}>
<Tab value="TypeScript">
```typescript
const symbols = await client.lspSymbols('main');
```
</Tab>
<Tab value="Python">
```python
symbols = await client.lsp_symbols("main")
```
</Tab>
</Tabs>

### Diagnostics

Get errors and warnings for a file:

<Tabs groupId="lang" items={['TypeScript', 'Python']}>
<Tab value="TypeScript">
```typescript
const diags = await client.lspDiagnostics('/path/to/file.rs');
```
</Tab>
<Tab value="Python">
```python
diags = await client.lsp_diagnostics("/path/to/file.rs")
```
</Tab>
</Tabs>

## Lifecycle RPCs

| RPC | Description |
|-----|-------------|
| `startLspServer(language, rootUri)` | Start a language server |
| `stopLspServer(language)` | Stop a language server |
| `listLspServers()` | List running servers |
| `lspHover(filePath, line, column)` | Get hover information |
| `lspDefinition(filePath, line, column)` | Go to definition |
| `lspReferences(filePath, line, column)` | Find all references |
| `lspSymbols(query, limit)` | Search workspace symbols |
| `lspDiagnostics(filePath)` | Get diagnostics |

## Agent Integration

When an LSP server is running, the agent can use code intelligence tools automatically. For example, when asked to refactor a function, the agent can:

1. Use `lsp_references` to find all callers
2. Use `lsp_definition` to understand the implementation
3. Use `lsp_diagnostics` to verify changes compile correctly
