---
title: A3S Code
description: Embeddable AI coding agent framework in Rust with native Node.js and Python bindings
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';
import { Steps, Step } from 'fumadocs-ui/components/steps';

# A3S Code

**Embeddable AI coding agent framework in Rust** â€” Build AI agents that read, write, and execute code with tool access, planning, safety controls, and multi-machine distribution.

```rust
let agent = Agent::new("agent.hcl").await?;
let session = agent.session(".", None)?;
let result = session.send("Refactor auth to use JWT", None).await?;
```

<Callout type="info">
**Test Coverage:** 1214 tests, 100% pass rate (includes 8 resilience tests) | **Extension Points:** 14 trait-based | **Built-in Tools:** 11 (12 with `sandbox` feature)
</Callout>

## Why A3S Code?

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">ğŸ”§ Embeddable</h3>
    <span className="text-sm text-muted-foreground">Rust library, not a service. Integrate into your app with Node.js/Python bindings.</span>
  </div>

  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">ğŸ›¡ï¸ Production-Ready</h3>
    <span className="text-sm text-muted-foreground">Permission system, HITL confirmation, skill-based tool restrictions, and error recovery (parse retries, tool timeout, circuit breaker).</span>
  </div>

  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">ğŸ”Œ Extensible</h3>
    <span className="text-sm text-muted-foreground">14 trait-based extension points. Replace any policy with your own implementation.</span>
  </div>

  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">ğŸ“ˆ Scalable</h3>
    <span className="text-sm text-muted-foreground">Lane-based priority queue with multi-machine task distribution.</span>
  </div>
</div>

## Quick Start

<Steps>
<Step>

### Installation

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```bash
cargo add a3s-code-core
```
</Tab>
<Tab value="TypeScript">
```bash
npm install @a3s-lab/code
```
</Tab>
<Tab value="Python">
```bash
pip install a3s-code
```
</Tab>
</Tabs>

</Step>
<Step>

### Configuration

Create `agent.hcl`:

```hcl
default_model = "anthropic/claude-sonnet-4-20250514"

providers {
  name    = "anthropic"
  api_key = env("ANTHROPIC_API_KEY")
}
```

<Callout type="info">
A3S Code uses HCL configuration format exclusively. See [Providers](/docs/code/providers) for multi-provider setup and full config reference.
</Callout>

</Step>
<Step>

### Basic Usage

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
use a3s_code_core::{Agent, SessionOptions};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let agent = Agent::new("agent.hcl").await?;

    // Basic usage
    let session = agent.session(".", None)?;
    let result = session.send("What files handle authentication?", None).await?;
    println!("{}", result.text);

    // With options
    let session = agent.session(".", Some(
        SessionOptions::new()
            .with_default_security()
            .with_builtin_skills()
            .with_planning(true)
    ))?;

    let result = session.send("Refactor auth + update tests", None).await?;
    Ok(())
}
```
</Tab>
<Tab value="TypeScript">
```typescript
import { Agent } from '@a3s-lab/code';

const agent = await Agent.create('agent.hcl');
const session = agent.session('.', {
  defaultSecurity: true,
  builtinSkills: true,
  planning: true,
});

const result = await session.send('Refactor auth + update tests');
console.log(result.text);
```
</Tab>
<Tab value="Python">
```python
from a3s_code import Agent

agent = Agent.create("agent.hcl")
session = agent.session(".", default_security=True, builtin_skills=True, planning=True)

result = session.send("Refactor auth + update tests")
print(result.text)
```
</Tab>
</Tabs>

</Step>
</Steps>

## Architecture

5 core components (stable, not replaceable) + 14 extension points (replaceable via traits):

```
Agent (config-driven)
  â””â”€â”€ AgentSession (workspace-bound)
        â”œâ”€â”€ AgentLoop (core execution engine)
        â”‚     â”œâ”€â”€ ToolExecutor (11 built-in tools)
        â”‚     â”œâ”€â”€ Planning (task decomposition + wave execution)
        â”‚     â””â”€â”€ HITL Confirmation
        â”œâ”€â”€ SessionLaneQueue (a3s-lane backed)
        â”‚     â”œâ”€â”€ Control (P0) â†’ Query (P1) â†’ Execute (P2) â†’ Generate (P3)
        â”‚     â””â”€â”€ External Task Distribution
        â”œâ”€â”€ HookEngine (8 lifecycle events)
        â”œâ”€â”€ Security (PII redaction, injection detection)
        â”œâ”€â”€ Skills (instruction injection + tool permissions)
        â”œâ”€â”€ Context (RAG providers)
        â””â”€â”€ Memory (episodic, semantic, procedural, working)
```

See [Architecture](/docs/code/architecture) for detailed documentation.

## Documentation

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">Core</h3>
    <ul className="text-sm text-muted-foreground space-y-1">
      <li><a href="/docs/code/sessions">Sessions</a> â€” Lifecycle, send/stream, history, vision</li>
      <li><a href="/docs/code/tools">Tools</a> â€” 11 built-in tools reference</li>
      <li><a href="/docs/code/tasks">Tasks</a> â€” Planning and wave-based execution</li>
      <li><a href="/docs/code/skills">Skills</a> â€” Skill system and tool restrictions</li>
    </ul>
  </div>

  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">Security & Safety</h3>
    <ul className="text-sm text-muted-foreground space-y-1">
      <li><a href="/docs/code/security">Security</a> â€” Permissions, PII redaction, HITL</li>
    </ul>
  </div>

  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">Infrastructure</h3>
    <ul className="text-sm text-muted-foreground space-y-1">
      <li><a href="/docs/code/architecture">Architecture</a> â€” System design overview</li>
      <li><a href="/docs/code/lane-queue">Lane Queue</a> â€” Priority routing and queue features</li>
      <li><a href="/docs/code/multi-machine">Multi-Machine</a> â€” Horizontal scaling guide</li>
    </ul>
  </div>

  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">Extensions</h3>
    <ul className="text-sm text-muted-foreground space-y-1">
      <li><a href="/docs/code/providers">Providers</a> â€” LLM providers and full config reference</li>
      <li><a href="/docs/code/mcp">MCP</a> â€” External tool integration</li>
      <li><a href="/docs/code/subagents">Subagents</a> â€” Delegate to specialized agents</li>
      <li><a href="/docs/code/context">Context</a> â€” RAG providers</li>
      <li><a href="/docs/code/memory">Memory</a> â€” Long-term memory</li>
      <li><a href="/docs/code/hooks">Hooks</a> â€” Lifecycle events</li>
      <li><a href="/docs/code/persistence">Persistence</a> â€” Session storage</li>
      <li><a href="/docs/code/telemetry">Telemetry</a> â€” Cost tracking and metrics</li>
    </ul>
  </div>
</div>

## Testing

```bash
cargo test          # All tests
cargo test --lib    # Unit tests only
```

**Test Coverage:** 1214 tests, 100% pass rate

## License

MIT License

## Related Projects

- **[A3S Lane](/docs/lane)** â€” Priority-based task queue with DLQ
- **[A3S Search](/docs/search)** â€” Multi-engine web search aggregator
- **[A3S Box](/docs/box)** â€” Secure sandbox runtime with TEE support
- **[A3S Event](/docs/event)** â€” Event-driven architecture primitives
