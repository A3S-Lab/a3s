---
title: A3S Code
description: Production-ready AI coding agent framework — embeddable Rust core with native bindings, gRPC server mode, 11 built-in tools, and defense-in-depth security
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';

# A3S Code

A3S Code is a high-performance Rust framework for building AI coding agents. It ships as an embeddable library (`a3s-code-core`) with native Python and Node.js bindings, and optionally as a gRPC server with 86 RPCs for multi-session management.

All subsystems — hooks, security, memory, MCP/LSP tools, subagent delegation, planning — are wired into the core execution path and active by default.

## Key Features

- **Dual Mode** — Embed as a library (zero IPC) or run as a gRPC server (multi-session)
- **Native Bindings** — Rust, Python (PyO3), Node.js (napi-rs) — no serialization overhead
- **11 Built-in Tools** — bash, read, write, edit, patch, grep, glob, ls, web_fetch, web_search, cron
- **Permission System** — Allow/Deny/Ask rules for fine-grained tool access control
- **Human-in-the-Loop** — Require user confirmation before sensitive operations
- **Skills System** — Extend the agent with Markdown-based prompt-injection skills
- **Subagent Delegation** — Delegate specialized tasks to focused child agents
- **Server-Side Agentic Loop** — Full agentic loop with streaming events
- **LSP & MCP Integration** — Code intelligence and external tool protocols
- **Security Guards** — Output sanitization, taint tracking, injection detection, tool interception
- **Observability** — OpenTelemetry spans, per-session cost tracking, tool metrics

## Quick Example

<Tabs groupId="lang" items={['Rust (Native)', 'Python (Native)', 'Node.js (Native)', 'TypeScript (gRPC)', 'Python (gRPC)']}>
<Tab value="Rust (Native)">
```rust
use a3s_code_core::Agent;

let agent = Agent::builder()
    .model("claude-sonnet-4-20250514")
    .api_key("sk-ant-...")
    .workspace("/project")
    .system_prompt("You are a senior engineer.")
    .build()
    .await?;

// Streaming
let (mut rx, handle) = agent.stream("Refactor the auth module").await?;
while let Some(event) = rx.recv().await {
    match event {
        AgentEvent::TextDelta { text } => print!("{text}"),
        AgentEvent::ToolStart { name, .. } => println!("\nTool: {name}"),
        AgentEvent::ToolEnd { name, output, .. } => {
            println!("  → {}", &output[..100.min(output.len())]);
        }
        _ => {}
    }
}
let result = handle.await??;
println!("\nTokens: {}", result.usage.total_tokens);
```
</Tab>
<Tab value="Python (Native)">
```python
from a3s_code import Agent

agent = Agent(
    model="claude-sonnet-4-20250514",
    api_key="sk-ant-...",
    workspace="/project",
    system_prompt="You are a senior engineer.",
)

for event in agent.stream("Refactor the auth module"):
    if event.event_type == "text_delta":
        print(event.text, end="", flush=True)
    elif event.event_type == "tool_start":
        print(f"\nTool: {event.tool_name}")
```
</Tab>
<Tab value="Node.js (Native)">
```typescript
import { Agent } from '@a3s-lab/code';

const agent = new Agent({
  model: 'claude-sonnet-4-20250514',
  apiKey: 'sk-ant-...',
  workspace: '/project',
  systemPrompt: 'You are a senior engineer.',
});

const events = await agent.stream('Refactor the auth module');
for (const event of events) {
  if (event.type === 'text_delta') process.stdout.write(event.text);
  if (event.type === 'tool_start') console.log(`\nTool: ${event.tool_name}`);
}
```
</Tab>
<Tab value="TypeScript (gRPC)">
```typescript
import { A3sClient, createProvider } from '@a3s-lab/code';

const client = new A3sClient({ address: 'localhost:4088' });
const anthropic = createProvider({ name: 'anthropic', apiKey: 'sk-ant-...' });

await using session = await client.createSession({
  model: anthropic('claude-sonnet-4-20250514'),
  workspace: '/project',
  system: 'You are a senior engineer.',
});

for await (const event of session.stream('Refactor the auth module')) {
  if (event.textDelta) process.stdout.write(event.textDelta);
  if (event.toolStart) console.log(`\nTool: ${event.toolStart.name}`);
}
```
</Tab>
<Tab value="Python (gRPC)">
```python
from a3s_code import A3sClient, create_provider

anthropic = create_provider(name="anthropic", api_key="sk-ant-...")

async with A3sClient(address="localhost:4088") as client:
    async with await client.session(
        model=anthropic("claude-sonnet-4-20250514"),
        workspace="/project",
        system="You are a senior engineer.",
    ) as session:
        async for event in session.stream("Refactor the auth module"):
            if event.type == "text":
                print(event.content, end="", flush=True)
```
</Tab>
</Tabs>

## Architecture at a Glance

```
Native Mode (Library)                    Server Mode (gRPC)
─────────────────────                    ──────────────────
Your App                                 SDK Client (TS/Python)
  │                                        │
  ▼ Direct calls                           ▼ gRPC :4088
┌──────────────────┐                     ┌──────────────────────────────┐
│ a3s-code-core    │                     │ CodeAgentService             │
│ Agent::builder() │                     │ SessionManager → Agent Loop  │
│ .send() .stream()│                     │ 86 RPCs, multi-session       │
└──────────────────┘                     └──────────────────────────────┘
        │                                          │
        └──────────────┬───────────────────────────┘
                       ▼
┌─────────────────────────────────────────────────────────────┐
│  Shared Core                                                │
│  ┌─────────────┬─────────────┬─────────────┬──────────────┐ │
│  │    Tool     │ Permission  │     LLM     │   Security   │ │
│  │  Executor   │   System    │   Provider  │    Guard     │ │
│  └─────────────┴─────────────┴─────────────┴──────────────┘ │
│  ┌─────────────┬─────────────┬─────────────┬──────────────┐ │
│  │   Skills    │  Subagent   │   LSP/MCP   │   Memory     │ │
│  │   System    │  Task Tool  │   (auto)    │  & Planning  │ │
│  └─────────────┴─────────────┴─────────────┴──────────────┘ │
└─────────────────────────────────────────────────────────────┘
```
