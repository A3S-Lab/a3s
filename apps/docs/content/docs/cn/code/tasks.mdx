---
title: ä»»åŠ¡
description: ç»Ÿä¸€ä»»åŠ¡ç³»ç»Ÿï¼šè§„åˆ’ã€è¿½è¸ªå’Œå¹¶è¡Œæ‰§è¡Œ
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';
import { Steps, Step } from 'fumadocs-ui/components/steps';

# ä»»åŠ¡

A3S Code æä¾›ç»Ÿä¸€çš„ä»»åŠ¡ç³»ç»Ÿï¼Œæ”¯æŒ LLM é©±åŠ¨çš„è§„åˆ’ã€ç›®æ ‡è¿½è¸ªå’Œå¹¶è¡Œæ‰§è¡Œã€‚ä»»åŠ¡ç³»ç»Ÿå°†å¤æ‚è¯·æ±‚åˆ†è§£ä¸ºç»“æ„åŒ–çš„æ‰§è¡Œè®¡åˆ’ã€‚

<Callout type="info">
**æ ¸å¿ƒåŠŸèƒ½ï¼š** LLM è§„åˆ’å™¨ | Wave è°ƒåº¦å™¨ | ç›®æ ‡è¿½è¸ª | ä¾èµ–å›¾ | å¹¶è¡Œæ‰§è¡Œ
</Callout>

## æ¦‚è¿°

å½“å¯ç”¨è§„åˆ’æ—¶ï¼ŒAgent ä¼šï¼š

<Steps>
<Step>**LlmPlanner** å°†ä»»åŠ¡åˆ†è§£ä¸ºå¸¦ä¾èµ–å…³ç³»çš„æ­¥éª¤</Step>
<Step>**WaveScheduler** å°†ç‹¬ç«‹æ­¥éª¤åˆ†ç»„ä¸º wave</Step>
<Step>æ¯ä¸ª wave é€šè¿‡ `tokio::JoinSet` å¹¶è¡Œæ‰§è¡Œ</Step>
<Step>ä¾èµ–æ­¥éª¤ç­‰å¾…å…¶å‰ç½®æ­¥éª¤å®Œæˆ</Step>
</Steps>

```
Wave 1: [åˆ†æè®¤è¯æ¨¡å—] + [åˆ†ææ•°æ®åº“ schema]  â† å¹¶è¡Œ
Wave 2: [å®ç° JWT é›†æˆ]                       â† ç­‰å¾… wave 1
Wave 3: [ç¼–å†™æµ‹è¯•]                             â† ç­‰å¾… wave 2
```

## å¯ç”¨è§„åˆ’

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
use a3s_code_core::{Agent, SessionOptions};

let agent = Agent::new("agent.hcl").await?;

let session = agent.session("/project", Some(
    SessionOptions::new()
        .with_planning(true)
))?;

let result = session.send("Refactor the auth module to use JWT").await?;
```
</Tab>
<Tab value="TypeScript">
```typescript
const agent = await Agent.create('agent.hcl');

const session = agent.session('/project', {
  planning: true,
});

const result = await session.send('Refactor the auth module to use JWT');
```
</Tab>
<Tab value="Python">
```python
agent = Agent.create("agent.hcl")

session = agent.session("/project", planning=True)

result = session.send("Refactor the auth module to use JWT")
```
</Tab>
</Tabs>

## ç›®æ ‡è¿½è¸ª

å¯ç”¨ç›®æ ‡è¿½è¸ªåï¼ŒAgent ä¼šç»´æŠ¤ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨å¹¶åœ¨æµå¼äº‹ä»¶ä¸­æŠ¥å‘Šè¿›åº¦ï¼š

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
let session = agent.session("/project", Some(
    SessionOptions::new()
        .with_planning(true)
        .with_goal_tracking(true)
))?;

let (mut rx, _handle) = session.stream("Build a REST API with auth").await?;
while let Some(event) = rx.recv().await {
    match event {
        AgentEvent::TaskUpdated { tasks, .. } => {
            for task in &tasks {
                let icon = match task.status {
                    TaskStatus::Pending => "â³",
                    TaskStatus::InProgress => "ğŸ”„",
                    TaskStatus::Completed => "âœ…",
                    TaskStatus::Failed => "âŒ",
                };
                println!("{icon} {}", task.description);
            }
        }
        AgentEvent::End { .. } => break,
        _ => {}
    }
}
```
</Tab>
<Tab value="TypeScript">
```typescript
const session = agent.session('/project', {
  planning: true,
  goalTracking: true,
});

for await (const event of session.stream('Build a REST API with auth')) {
  if (event.type === 'task_updated') {
    for (const task of event.tasks) {
      const icon = { pending: 'â³', in_progress: 'ğŸ”„', completed: 'âœ…', failed: 'âŒ' }[task.status];
      console.log(`${icon} ${task.description}`);
    }
  }
}
```
</Tab>
<Tab value="Python">
```python
session = agent.session("/project", planning=True, goal_tracking=True)

for event in session.stream("Build a REST API with auth"):
    if event.event_type == "task_updated":
        for task in event.tasks:
            icons = {"pending": "â³", "in_progress": "ğŸ”„", "completed": "âœ…", "failed": "âŒ"}
            print(f"{icons[task.status]} {task.description}")
```
</Tab>
</Tabs>

## æ‰§è¡Œè®¡åˆ’ç»“æ„

LlmPlanner ç”Ÿæˆ JSON ç»“æ„åŒ–çš„æ‰§è¡Œè®¡åˆ’ï¼š

```json
{
  "steps": [
    {
      "id": "step-1",
      "description": "Analyze current auth implementation",
      "dependencies": [],
      "tools": ["read", "grep", "glob"]
    },
    {
      "id": "step-2",
      "description": "Analyze database schema",
      "dependencies": [],
      "tools": ["read", "grep"]
    },
    {
      "id": "step-3",
      "description": "Implement JWT middleware",
      "dependencies": ["step-1", "step-2"],
      "tools": ["write", "edit"]
    },
    {
      "id": "step-4",
      "description": "Write integration tests",
      "dependencies": ["step-3"],
      "tools": ["write", "bash"]
    }
  ]
}
```

## Wave è°ƒåº¦

WaveScheduler å°†ç‹¬ç«‹æ­¥éª¤åˆ†ç»„ä¸º wave å¹¶è¡Œæ‰§è¡Œï¼š

```
ä¾èµ–å›¾:
  step-1 â”€â”€â”
            â”œâ”€â”€â†’ step-3 â”€â”€â†’ step-4
  step-2 â”€â”€â”˜

Wave åˆ†ç»„:
  Wave 1: [step-1, step-2]  â† æ— ä¾èµ–ï¼Œå¹¶è¡Œæ‰§è¡Œ
  Wave 2: [step-3]          â† ä¾èµ– step-1 å’Œ step-2
  Wave 3: [step-4]          â† ä¾èµ– step-3
```

æ¯ä¸ª wave ä¸­çš„æ­¥éª¤é€šè¿‡ `tokio::JoinSet` å¹¶è¡Œæ‰§è¡Œã€‚

## TaskStatus

| çŠ¶æ€ | æè¿° |
|--------|-------------|
| `Pending` | ç­‰å¾…æ‰§è¡Œ |
| `InProgress` | æ­£åœ¨æ‰§è¡Œ |
| `Completed` | æ‰§è¡ŒæˆåŠŸ |
| `Failed` | æ‰§è¡Œå¤±è´¥ |

## äº‹ä»¶

ä»»åŠ¡ç›¸å…³çš„æµå¼äº‹ä»¶ï¼š

| äº‹ä»¶ | è§¦å‘æ—¶æœº |
|-------|------|
| `TaskUpdated` | ä»»åŠ¡åˆ—è¡¨å˜æ›´ï¼ˆæ–°å¢ã€çŠ¶æ€æ›´æ–°ï¼‰ |

å‚è§ [ä¼šè¯](/cn/docs/code/sessions) è·å–å®Œæ•´äº‹ä»¶å‚è€ƒã€‚

## API å‚è€ƒ

### SessionOptions

| é€‰é¡¹ | Rust | Python | Node.js | é»˜è®¤å€¼ |
|--------|------|--------|---------|---------|
| è§„åˆ’ | `.with_planning(true)` | `planning=True` | `planning: true` | `false` |
| ç›®æ ‡è¿½è¸ª | `.with_goal_tracking(true)` | `goal_tracking=True` | `goalTracking: true` | `false` |

### TaskInfo

| å­—æ®µ | ç±»å‹ | æè¿° |
|-------|------|-------------|
| `id` | `String` | ä»»åŠ¡å”¯ä¸€æ ‡è¯† |
| `description` | `String` | ä»»åŠ¡æè¿° |
| `status` | `TaskStatus` | å½“å‰çŠ¶æ€ |
| `dependencies` | `Vec<String>` | å‰ç½®ä»»åŠ¡ ID åˆ—è¡¨ |
