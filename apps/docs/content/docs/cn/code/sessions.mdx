---
title: ä¼šè¯
description: åˆ›å»ºä¼šè¯ã€å‘é€æç¤ºã€æµå¼å“åº”å’Œç®¡ç†å¯¹è¯å†å²
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { TypeTable } from 'fumadocs-ui/components/type-table';
import { Callout } from 'fumadocs-ui/components/callout';
import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';

# ä¼šè¯

æ¯ä¸ªä¼šè¯ç»‘å®šåˆ°ä¸€ä¸ªå·¥ä½œåŒºç›®å½•ã€‚Agent é€šè¿‡ `agent.session(workspace, options?)` åˆ›å»ºä¼šè¯ã€‚ä¼šè¯æŒæœ‰è‡ªå·±çš„ LLM å®¢æˆ·ç«¯ã€å¯¹è¯å†å²å’Œå·¥å…·ä¸Šä¸‹æ–‡ã€‚

ç”Ÿæˆ API â€” `send()` å’Œ `stream()` â€” å°†æç¤ºå‘é€ç»™ LLM å¹¶è¿”å›å“åº”ã€‚Agent å¾ªç¯è‡ªåŠ¨å¤„ç†å·¥å…·æ‰§è¡Œã€‚

## åˆ›å»ºä¼šè¯

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
use a3s_code_core::{Agent, SessionOptions};

let agent = Agent::new("agent.hcl").await?;

// Default session (uses config's default model)
let session = agent.session("/my-project", None)?;

// Session with model override
let session = agent.session("/my-project", Some(
    SessionOptions::new()
        .with_model("openai/gpt-4o")
))?;
```
</Tab>
<Tab value="TypeScript">
```typescript
const { Agent } = require('@a3s-lab/code');

const agent = await Agent.create('agent.hcl');

// Default session
const session = agent.session('/my-project');

// Session with model override
const session = agent.session('/my-project', {
  model: 'openai/gpt-4o',
});
```
</Tab>
<Tab value="Python">
```python
from a3s_code import Agent

agent = Agent.create("agent.hcl")

# Default session
session = agent.session("/my-project")

# Session with model override
session = agent.session("/my-project", model="openai/gpt-4o")
```
</Tab>
</Tabs>

## SessionOptions

<TypeTable
  type={
    "æ¨¡å‹è¦†ç›–": {
      description: {`Rust: \`with_model("provider/model")\` Â· TypeScript: \`model: "provider/model"\` Â· Python: \`model="provider/model"\` Â· æè¿°: æ ¼å¼ï¼š\`provider/model\`ï¼ˆä¾‹å¦‚ \`openai/gpt-4o\`ï¼‰`},
    },
    "Skill ç›®å½•": {
      description: {`Rust: \`with_skill_dir("path")\` Â· TypeScript: \`skillDirs: ["path"]\` Â· Python: \`skill_dirs=["path"]\` Â· æè¿°: é¢å¤–çš„ skill æ–‡ä»¶æ‰«æç›®å½•ï¼ˆä¸å…¨å±€ \`skill_dirs\` åˆå¹¶ï¼‰`},
    },
    "Agent ç›®å½•": {
      description: {`Rust: \`with_agent_dir("path")\` Â· TypeScript: \`agentDirs: ["path"]\` Â· Python: \`agent_dirs=["path"]\` Â· æè¿°: é¢å¤–çš„ agent æ–‡ä»¶æ‰«æç›®å½•ï¼ˆä¸å…¨å±€ \`agent_dirs\` åˆå¹¶ï¼‰`},
    },
    "è§£æé‡è¯•": {
      description: {`Rust: \`with_parse_retries(n)\` Â· TypeScript: \`maxParseRetries: n\` Â· Python: \`max_parse_retries=n\` Â· æè¿°: è¿ç»­å·¥å…·å‚æ•°æ ¼å¼é”™è¯¯çš„æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ï¼š2ï¼‰`},
    },
    "å·¥å…·è¶…æ—¶": {
      description: {`Rust: \`with_tool_timeout(ms)\` Â· TypeScript: \`toolTimeoutMs: ms\` Â· Python: \`tool_timeout_ms=ms\` Â· æè¿°: æ¯ä¸ªå·¥å…·çš„æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼›è¶…æ—¶åé”™è¯¯ä¼šåé¦ˆç»™ LLMï¼ˆé»˜è®¤ï¼šæ— ï¼‰`},
    },
    "ç†”æ–­å™¨": {
      description: {`Rust: \`with_circuit_breaker(n)\` Â· TypeScript: \`circuitBreakerThreshold: n\` Â· Python: \`circuit_breaker_threshold=n\` Â· æè¿°: éæµå¼æ¨¡å¼ä¸‹ LLM API å¤±è´¥çš„æœ€å¤§æ¬¡æ•°ï¼ˆé»˜è®¤ï¼š3ï¼‰`},
    },
    "å¼¹æ€§å¥—ä»¶": {
      description: {`Rust: \`with_resilience_defaults()\` Â· æè¿°: å¯ç”¨ parse_retries=2ã€tool_timeout=120sã€circuit_breaker=3`},
    },
    "æ²™ç®±": {
      description: {`Rust: \`with_sandbox(SandboxConfig)\` Â· æè¿°: é€šè¿‡ A3S Box MicroVM è·¯ç”± \`bash\` å·¥å…·ï¼ˆéœ€è¦ \`sandbox\` featureï¼‰`},
    },
  }
/>

æ¨¡å‹å¿…é¡»åœ¨ agent é…ç½®æ–‡ä»¶çš„ `providers` ä¸­å®šä¹‰ã€‚æ ¼å¼ä¸º `provider_name/model_id`ã€‚

å…¨å±€ `skill_dirs` å’Œ `agent_dirs` åœ¨ agent é…ç½®ä¸­è®¾ç½®ã€‚æ¯ä¸ªä¼šè¯çš„ç›®å½•ä¼šä¸å…¨å±€ç›®å½•åˆå¹¶ â€” è¯¦è§ [Skills](/cn/docs/code/skills)ã€‚

## é”™è¯¯æ¢å¤ä¸å¼¹æ€§

ä¸‰å±‚é”™è¯¯æ¢å¤æœºåˆ¶ä¿æŠ¤é•¿æ—¶é—´è¿è¡Œçš„ä¼šè¯ï¼š

<Accordions>
<Accordion title="è§£æé”™è¯¯æ¢å¤">
å½“ LLM è¿”å›æ ¼å¼é”™è¯¯çš„å·¥å…·å‚æ•°ï¼ˆ`__parse_error`ï¼‰æ—¶ï¼Œé”™è¯¯ä¼šä½œä¸ºå·¥å…·ç»“æœåé¦ˆç»™æ¨¡å‹ä»¥ä¾¿è‡ªæˆ‘ä¿®æ­£ã€‚è¿ç»­å¤±è´¥ `max_parse_retries` æ¬¡åå¾ªç¯ä¸­æ­¢ã€‚
</Accordion>
<Accordion title="å·¥å…·æ‰§è¡Œè¶…æ—¶">
æ¯ä¸ªå·¥å…·è°ƒç”¨éƒ½åŒ…è£…åœ¨ `tokio::time::timeout` ä¸­ã€‚è¶…æ—¶çš„å·¥å…·ä¼šäº§ç”Ÿé”™è¯¯æ¶ˆæ¯åé¦ˆç»™ LLMï¼›ä¼šè¯ç»§ç»­è¿è¡Œã€‚
</Accordion>
<Accordion title="ç†”æ–­å™¨">
ç¬æ€ LLM API æ•…éšœï¼ˆç½‘ç»œé”™è¯¯ã€é€Ÿç‡é™åˆ¶ï¼‰åœ¨éæµå¼æ¨¡å¼ä¸‹ä¼šä»¥çŸ­æŒ‡æ•°é€€é¿é‡è¯•æœ€å¤š `circuit_breaker_threshold` æ¬¡ã€‚åœ¨æµå¼æ¨¡å¼ä¸‹ï¼Œä»»ä½•æ•…éšœéƒ½æ˜¯è‡´å‘½çš„ï¼ˆäº‹ä»¶æ— æ³•é‡æ”¾ï¼‰ã€‚
</Accordion>
</Accordions>

```rust
// Rust â€” individual controls
let session = agent.session(".", Some(
    SessionOptions::new()
        .with_parse_retries(3)          // bail after 3 consecutive parse errors
        .with_tool_timeout(30_000)      // 30s per tool
        .with_circuit_breaker(5)        // retry LLM up to 5 times
))?;

// Rust â€” sensible bundle (parse=2, timeout=2min, circuit_breaker=3)
let session = agent.session(".", Some(
    SessionOptions::new().with_resilience_defaults()
))?;
```

## å‘é€ï¼ˆéæµå¼ï¼‰

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
let result = session.send("What files handle authentication?").await?;
println!("{}", result.text);
println!("Tools: {}, Tokens: {}", result.tool_calls_count, result.usage.total_tokens);
```
</Tab>
<Tab value="TypeScript">
```typescript
const result = await session.send('What files handle authentication?');
console.log(result.text);
console.log(`Tools: ${result.toolCallsCount}, Tokens: ${result.totalTokens}`);
```
</Tab>
<Tab value="Python">
```python
result = session.send("What files handle authentication?")
print(result.text)
print(f"Tools: {result.tool_calls_count}, Tokens: {result.total_tokens}")
```
</Tab>
</Tabs>

## å¸¦é™„ä»¶å‘é€ï¼ˆè§†è§‰ï¼‰

å‘é€å›¾ç‰‡é™„ä»¶å’Œæ–‡æœ¬æç¤ºã€‚éœ€è¦æ”¯æŒè§†è§‰çš„æ¨¡å‹ï¼ˆClaude Sonnetã€GPT-4oï¼‰ã€‚

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
use a3s_code_core::Attachment;

// From file (auto-detects media type from extension)
let image = Attachment::from_file("screenshot.png")?;

// Or from bytes
let image = Attachment::jpeg(raw_bytes);

let result = session.send_with_attachments(
    "What's in this screenshot?",
    &[image],
    None,
).await?;
println!("{}", result.text);
```
</Tab>
<Tab value="TypeScript">
```typescript
const image = await fs.readFile('screenshot.png');
const result = await session.sendWithAttachments(
  "What's in this screenshot?",
  [{ data: image, mediaType: 'image/png' }],
);
console.log(result.text);
```
</Tab>
<Tab value="Python">
```python
from a3s_code import Attachment

image = Attachment.from_file("screenshot.png")
result = session.send_with_attachments(
    "What's in this screenshot?",
    [image],
)
print(result.text)
```
</Tab>
</Tabs>

æ”¯æŒçš„å›¾ç‰‡æ ¼å¼ï¼šJPEGã€PNGã€GIFã€WebPã€‚

æµå¼å˜ä½“ï¼š

```rust
let (rx, handle) = session.stream_with_attachments(
    "Describe this diagram",
    &[Attachment::from_file("diagram.png")?],
    None,
).await?;
```

### å·¥å…·å›¾ç‰‡è¾“å‡º

å·¥å…·å¯ä»¥åœ¨æ–‡æœ¬è¾“å‡ºæ—è¿”å›å›¾ç‰‡ã€‚å½“å·¥å…·è¿”å›å›¾ç‰‡æ—¶ï¼Œå®ƒä»¬ä¼šä½œä¸ºå¤šæ¨¡æ€å†…å®¹å—åŒ…å«åœ¨å‘é€ç»™ LLM çš„å·¥å…·ç»“æœæ¶ˆæ¯ä¸­ã€‚

```rust
// In a custom tool implementation
async fn execute(&self, args: &Value, ctx: &ToolContext) -> Result<ToolOutput> {
    let screenshot_bytes = take_screenshot().await?;
    Ok(ToolOutput::success("Screenshot captured")
        .with_images(vec![Attachment::png(screenshot_bytes)]))
}
```

## æµå¼

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
use a3s_code_core::AgentEvent;

// AgentEvent is #[non_exhaustive] â€” always include a wildcard arm
let (mut rx, _handle) = session.stream("Refactor the auth module").await?;
while let Some(event) = rx.recv().await {
    match event {
        AgentEvent::TextDelta { text } => print!("{text}"),
        AgentEvent::ToolStart { name, .. } => println!("\nğŸ”§ {name}"),
        AgentEvent::End { text, usage } => {
            println!("\nâœ… Done: {} tokens", usage.total_tokens);
            break;
        }
        _ => {} // required: AgentEvent is #[non_exhaustive]
    }
}
```
</Tab>
<Tab value="TypeScript">
```typescript
// Returns an EventStream â€” use for await...of or call .next() manually
const stream = await session.stream('Refactor the auth module');
for await (const event of stream) {
  if (event.type === 'text_delta') process.stdout.write(event.text);
  if (event.type === 'tool_start') console.log(`\nğŸ”§ ${event.toolName}`);
  if (event.type === 'tool_end') console.log(`  â†’ ${event.toolOutput?.slice(0, 100)}`);
}

// Or iterate manually with .next()
const stream2 = await session.stream('Explain src/main.rs');
while (true) {
  const { value, done } = await stream2.next();
  if (done) break;
  if (value.type === 'text_delta') process.stdout.write(value.text);
}
```
</Tab>
<Tab value="Python">
```python
# Sync iteration (works without an event loop)
for event in session.stream("Refactor the auth module"):
    if event.event_type == "text_delta":
        print(event.text, end="", flush=True)
    elif event.event_type == "tool_start":
        print(f"\nğŸ”§ {event.tool_name}")
    elif event.event_type == "tool_end":
        print(f"  â†’ {event.tool_output[:100]}")

# Async iteration (inside async def)
async for event in session.stream("Refactor the auth module"):
    if event.event_type == "text_delta":
        print(event.text, end="", flush=True)
    elif event.event_type == "end":
        print(f"\nDone â€” {event.total_tokens} tokens")
        break
```
</Tab>
</Tabs>

## å¯¹è¯å†å²ï¼ˆRustï¼‰

é€šè¿‡ä¼ é€’å†å²è®°å½•ç»´æŠ¤å¤šè½®å¯¹è¯ï¼š

```rust
use a3s_code_core::llm::{ContentBlock, Message};

let history = vec![
    Message::user("What's in src/?"),
    Message {
        role: "assistant".to_string(),
        content: vec![ContentBlock::Text {
            text: "The src/ directory contains main.rs and lib.rs.".to_string(),
        }],
        reasoning_content: None,
    },
];

// Continue the conversation
let result = session.send_with_history(&history, "Now explain main.rs").await?;
```

## ç›´æ¥å·¥å…·æ‰§è¡Œ

ç›´æ¥è°ƒç”¨å·¥å…·è€Œä¸ç»è¿‡ LLMï¼š

<Tabs groupId="lang" items={['Rust', 'TypeScript', 'Python']}>
<Tab value="Rust">
```rust
session.read_file("src/main.rs").await?;
session.bash("cargo test").await?;
session.glob("**/*.rs").await?;
session.grep("fn main").await?;
session.tool("write", serde_json::json!({"file_path": "x.rs", "content": "..."})).await?;
```
</Tab>
<Tab value="TypeScript">
```typescript
await session.readFile('src/main.rs');
await session.bash('cargo test');
await session.glob('**/*.rs');
await session.grep('fn main');
await session.tool('write', { file_path: 'x.rs', content: '...' });
```
</Tab>
<Tab value="Python">
```python
session.read_file("src/main.rs")
session.bash("cargo test")
session.glob("**/*.rs")
session.grep("fn main")
session.tool("write", {"file_path": "x.rs", "content": "..."})
```
</Tab>
</Tabs>

## é…ç½®

å‚è§ [æä¾›å•†ä¸é…ç½®](/cn/docs/code/providers) è·å–å®Œæ•´çš„ HCL é…ç½®å‚è€ƒï¼ŒåŒ…æ‹¬æ‰€æœ‰å­—æ®µã€`env()` å‡½æ•°ã€é˜Ÿåˆ—å’Œæœç´¢é…ç½®ã€‚

## è¿”å›ç±»å‹

### AgentResult

<TypeTable
  type={
    {`\`text\``}: {
      description: {`ç±»å‹: \`string\` Â· æè¿°: LLM æœ€ç»ˆå“åº”æ–‡æœ¬`},
    },
    {`\`messages\``}: {
      description: {`ç±»å‹: \`Vec<Message>\` Â· æè¿°: å®Œæ•´å¯¹è¯å†å²ï¼ˆä»… Rustï¼‰`},
    },
    {`\`usage\``}: {
      description: {`ç±»å‹: \`TokenUsage\` Â· æè¿°: Token ä½¿ç”¨ç»Ÿè®¡`},
    },
    {`\`tool_calls_count\``}: {
      description: {`ç±»å‹: \`usize\` Â· æè¿°: å·¥å…·è°ƒç”¨æ¬¡æ•°`},
    },
  }
/>

### TokenUsage

<TypeTable
  type={
    {`\`prompt_tokens\``}: {
      description: {`ç±»å‹: \`usize\` Â· æè¿°: è¾“å…¥ token æ•°`},
    },
    {`\`completion_tokens\``}: {
      description: {`ç±»å‹: \`usize\` Â· æè¿°: è¾“å‡º token æ•°`},
    },
    {`\`total_tokens\``}: {
      description: {`ç±»å‹: \`usize\` Â· æè¿°: æ€» token æ•°`},
    },
    {`\`cache_read_tokens\``}: {
      description: {`ç±»å‹: \`Option<usize>\` Â· æè¿°: ç¼“å­˜è¯»å–çš„è¾“å…¥ token æ•°`},
    },
    {`\`cache_write_tokens\``}: {
      description: {`ç±»å‹: \`Option<usize>\` Â· æè¿°: ç¼“å­˜å†™å…¥çš„è¾“å…¥ token æ•°`},
    },
  }
/>

### AgentEvent

`AgentEvent` æ˜¯ `#[non_exhaustive]` çš„ â€” åœ¨ Rust ä¸­åŒ¹é…æ—¶å§‹ç»ˆåŒ…å«é€šé…ç¬¦åˆ†æ”¯ã€‚

**Agent ç”Ÿå‘½å‘¨æœŸï¼š**

<TypeTable
  type={
    {`\`Start\``}: {
      description: {`å­—æ®µ: \`prompt\` Â· æè¿°: å¼€å§‹å¤„ç†`},
    },
    {`\`TurnStart\``}: {
      description: {`å­—æ®µ: \`turn\` Â· æè¿°: æ–°è½®æ¬¡å¼€å§‹`},
    },
    {`\`TextDelta\``}: {
      description: {`å­—æ®µ: \`text\` Â· æè¿°: åŠ©æ‰‹çš„æ–‡æœ¬ç‰‡æ®µ`},
    },
    {`\`TurnEnd\``}: {
      description: {`å­—æ®µ: \`turn\`, \`total_tokens\` Â· æè¿°: è½®æ¬¡å®Œæˆ`},
    },
    {`\`End\``}: {
      description: {`å­—æ®µ: \`text\`, \`total_tokens\` Â· æè¿°: ç”Ÿæˆå®Œæˆ`},
    },
    {`\`Error\``}: {
      description: {`å­—æ®µ: \`error\` Â· æè¿°: å‘ç”Ÿé”™è¯¯`},
    },
  }
/>

**å·¥å…·æ‰§è¡Œï¼š**

<TypeTable
  type={
    {`\`ToolStart\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`tool_name\` Â· æè¿°: å·¥å…·è°ƒç”¨å¼€å§‹`},
    },
    {`\`ToolEnd\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`tool_name\`, \`tool_output\`, \`exit_code\` Â· æè¿°: å·¥å…·è°ƒç”¨å®Œæˆ`},
    },
    {`\`ToolOutputDelta\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`tool_name\`, \`text\` Â· æè¿°: å·¥å…·è¾“å‡ºå¢é‡`},
    },
  }
/>

**HITL å’Œæƒé™ï¼š**

<TypeTable
  type={
    {`\`ConfirmationRequired\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`tool_name\`, \`args\`, \`timeout_ms\` Â· æè¿°: éœ€è¦ HITL ç¡®è®¤`},
    },
    {`\`ConfirmationReceived\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`approved\`, \`reason\` Â· æè¿°: æ”¶åˆ° HITL ç¡®è®¤`},
    },
    {`\`ConfirmationTimeout\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`action_taken\` Â· æè¿°: HITL ç¡®è®¤è¶…æ—¶`},
    },
    {`\`PermissionDenied\``}: {
      description: {`å­—æ®µ: \`tool_id\`, \`tool_name\`, \`args\`, \`reason\` Â· æè¿°: å·¥å…·è¢«æƒé™ç­–ç•¥é˜»æ­¢`},
    },
  }
/>

**ä¸Šä¸‹æ–‡å’Œè®°å¿†ï¼š**

<TypeTable
  type={
    {`\`ContextResolving\``}: {
      description: {`å­—æ®µ: \`providers\` Â· æè¿°: ä¸Šä¸‹æ–‡è§£æå¼€å§‹`},
    },
    {`\`ContextResolved\``}: {
      description: {`å­—æ®µ: \`total_items\`, \`total_tokens\` Â· æè¿°: ä¸Šä¸‹æ–‡è§£æå®Œæˆ`},
    },
    {`\`MemoryStored\``}: {
      description: "æè¿°: è®°å¿†é¡¹å·²å­˜å‚¨",
    },
    {`\`MemoryRecalled\``}: {
      description: "æè¿°: è®°å¿†é¡¹å·²å¬å›",
    },
    {`\`MemoriesSearched\``}: {
      description: "æè¿°: è®°å¿†æœç´¢å®Œæˆ",
    },
    {`\`MemoryCleared\``}: {
      description: "æè¿°: è®°å¿†å·²æ¸…é™¤",
    },
  }
/>

**ä»»åŠ¡ã€å­ä»£ç†å’Œ Lane é˜Ÿåˆ—ï¼š**

<TypeTable
  type={
    {`\`TaskUpdated\``}: {
      description: {`å­—æ®µ: \`session_id\`, \`tasks\` Â· æè¿°: ä»»åŠ¡åˆ—è¡¨å˜æ›´`},
    },
    {`\`SubagentStart\``}: {
      description: "æè¿°: å­ä»£ç†æ‰§è¡Œå¼€å§‹",
    },
    {`\`ExternalTaskPending\``}: {
      description: "æè¿°: å¤–éƒ¨ä»»åŠ¡å·²å…¥é˜Ÿ",
    },
    {`\`ExternalTaskCompleted\``}: {
      description: "æè¿°: å¤–éƒ¨ä»»åŠ¡å·²å®Œæˆ",
    },
    {`\`CommandDeadLettered\``}: {
      description: "æè¿°: Lane å‘½ä»¤è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—",
    },
    {`\`CommandRetry\``}: {
      description: "æè¿°: Lane å‘½ä»¤é‡è¯•",
    },
    {`\`QueueAlert\``}: {
      description: "æè¿°: é˜Ÿåˆ—å‘Šè­¦è§¦å‘",
    },
  }
/>

## API å‚è€ƒ

### Agent

<TypeTable
  type={
    {`\`new\``}: {
      description: {`ç­¾å: \`Agent::new(config: &str) -> Result<Agent>\` Â· æè¿°: ä» HCL æ–‡ä»¶æˆ–å­—ç¬¦ä¸²åŠ è½½`},
    },
    {`\`from_config\``}: {
      description: {`ç­¾å: \`Agent::from_config(config: AgentConfig) -> Result<Agent>\` Â· æè¿°: ä»ç»“æ„ä½“åŠ è½½`},
    },
    {`\`session\``}: {
      description: {`ç­¾å: \`agent.session(workspace, options?) -> Result<AgentSession>\` Â· æè¿°: åˆ›å»ºç»‘å®šå·¥ä½œåŒºçš„ä¼šè¯`},
    },
  }
/>

### AgentSession

<TypeTable
  type={
    "å‘é€æç¤º": {
      description: {`Rust: \`session.send(prompt, None).await?\` Â· Python: \`await session.send(prompt)\` Â· Node.js: \`await session.send(prompt)\``},
    },
    "æµå¼äº‹ä»¶": {
      description: {`Rust: \`session.stream(prompt, None).await?\` Â· Python: \`session.stream(prompt)\` Â· Node.js: \`session.stream(prompt)\``},
    },
    "å¸¦å›¾ç‰‡å‘é€": {
      description: {`Rust: \`session.send_with_attachments(p, &[img], None).await?\` Â· Python: \`await session.send_with_attachments(p, [img])\` Â· Node.js: \`await session.sendWithAttachments(p, [img])\``},
    },
    "è¯»å–æ–‡ä»¶": {
      description: {`Rust: \`session.read_file(path).await?\` Â· Python: \`await session.read_file(path)\` Â· Node.js: \`await session.readFile(path)\``},
    },
    "è¿è¡Œ bash": {
      description: {`Rust: \`session.bash(cmd).await?\` Â· Python: \`await session.bash(cmd)\` Â· Node.js: \`await session.bash(cmd)\``},
    },
    "Glob": {
      description: {`Rust: \`session.glob(pattern).await?\` Â· Python: \`await session.glob(pattern)\` Â· Node.js: \`await session.glob(pattern)\``},
    },
    "Grep": {
      description: {`Rust: \`session.grep(pattern).await?\` Â· Python: \`await session.grep(pattern)\` Â· Node.js: \`await session.grep(pattern)\``},
    },
    "è°ƒç”¨å·¥å…·": {
      description: {`Rust: \`session.tool(name, args).await?\` Â· Python: \`await session.tool(name, args)\` Â· Node.js: \`await session.tool(name, args)\``},
    },
    "å†å²è®°å½•": {
      description: {`Rust: \`session.history()\` Â· Python: \`session.history()\` Â· Node.js: \`session.history()\``},
    },
  }
/>

### SessionOptions

<TypeTable
  type={
    "æ¨¡å‹": {
      description: {`Rust: \`.with_model("provider/model")\` Â· Python: \`model="provider/model"\` Â· Node.js: \`model: "provider/model"\` Â· é»˜è®¤å€¼: é…ç½®é»˜è®¤å€¼`},
    },
    "å®½æ¾æ¨¡å¼": {
      description: {`Rust: \`.with_permissive_policy()\` Â· Python: \`permissive=True\` Â· Node.js: \`permissive: true\` Â· é»˜è®¤å€¼: \`false\``},
    },
    "è§„åˆ’": {
      description: {`Rust: \`.with_planning(true)\` Â· Python: \`planning=True\` Â· Node.js: \`planning: true\` Â· é»˜è®¤å€¼: \`false\``},
    },
    "ç›®æ ‡è·Ÿè¸ª": {
      description: {`Rust: \`.with_goal_tracking(true)\` Â· Python: \`goal_tracking=True\` Â· Node.js: \`goalTracking: true\` Â· é»˜è®¤å€¼: \`false\``},
    },
    "å†…ç½® skills": {
      description: {`Rust: \`.with_builtin_skills()\` Â· Python: \`builtin_skills=True\` Â· Node.js: \`builtinSkills: true\` Â· é»˜è®¤å€¼: \`false\``},
    },
    "Skill ç›®å½•": {
      description: {`Rust: \`.with_skills_from_dir(path)\` Â· Python: \`skill_dirs=[path]\` Â· Node.js: \`skillDirs: [path]\` Â· é»˜è®¤å€¼: \`[]\``},
    },
    "é»˜è®¤å®‰å…¨": {
      description: {`Rust: \`.with_default_security()\` Â· Python: \`default_security=True\` Â· Node.js: \`defaultSecurity: true\` Â· é»˜è®¤å€¼: \`false\``},
    },
    "æ–‡ä»¶è®°å¿†": {
      description: {`Rust: \`.with_file_memory(path)\` Â· Python: \`memory_dir=path\` Â· Node.js: \`memoryDir: path\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "è‡ªåŠ¨å‹ç¼©": {
      description: {`Rust: \`.with_auto_compact(true)\` Â· Python: \`auto_compact=True\` Â· Node.js: \`autoCompact: true\` Â· é»˜è®¤å€¼: \`false\``},
    },
    "è‡ªåŠ¨å‹ç¼©é˜ˆå€¼": {
      description: {`Rust: \`.with_auto_compact_threshold(f)\` Â· Python: \`auto_compact_threshold=f\` Â· Node.js: \`autoCompactThreshold: f\` Â· é»˜è®¤å€¼: \`0.8\``},
    },
    "æ–‡ä»¶ç³»ç»Ÿä¸Šä¸‹æ–‡": {
      description: {`Rust: \`.with_fs_context(path)\` Â· Python: \`fs_context=path\` Â· Node.js: \`fsContext: path\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "é˜Ÿåˆ—é…ç½®": {
      description: {`Rust: \`.with_queue_config(cfg)\` Â· Python: \`queue_config=cfg\` Â· Node.js: \`queueConfig: cfg\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "è§£æé‡è¯•": {
      description: {`Rust: \`.with_parse_retries(n)\` Â· Python: \`max_parse_retries=n\` Â· Node.js: \`maxParseRetries: n\` Â· é»˜è®¤å€¼: \`2\``},
    },
    "å·¥å…·è¶…æ—¶": {
      description: {`Rust: \`.with_tool_timeout(ms)\` Â· Python: \`tool_timeout_ms=ms\` Â· Node.js: \`toolTimeoutMs: ms\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "ç†”æ–­å™¨": {
      description: {`Rust: \`.with_circuit_breaker(n)\` Â· Python: \`circuit_breaker_threshold=n\` Â· Node.js: \`circuitBreakerThreshold: n\` Â· é»˜è®¤å€¼: \`3\``},
    },
    "å¼¹æ€§é»˜è®¤å€¼": {
      description: {`Rust: \`.with_resilience_defaults()\``},
    },
    "æ²™ç®±": {
      description: {`Rust: \`.with_sandbox(cfg)\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "æƒé™æ£€æŸ¥å™¨": {
      description: {`Rust: \`.with_permission_checker(p)\` Â· é»˜è®¤å€¼: \`PermissionPolicy\``},
    },
    "ç¡®è®¤ç®¡ç†å™¨": {
      description: {`Rust: \`.with_confirmation_manager(m)\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "å®‰å…¨æä¾›è€…": {
      description: {`Rust: \`.with_security_provider(p)\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "ä¸Šä¸‹æ–‡æä¾›è€…": {
      description: {`Rust: \`.with_context_provider(p)\` Â· é»˜è®¤å€¼: \`None\``},
    },
    "è®°å¿†å­˜å‚¨": {
      description: {`Rust: \`.with_memory(store)\` Â· é»˜è®¤å€¼: \`InMemoryStore\``},
    },
    "Hook å¼•æ“": {
      description: {`Rust: \`.with_hook_engine(h)\` Â· é»˜è®¤å€¼: \`HookEngine\``},
    },
  }
/>

### AgentResponse

<TypeTable
  type={
    "æ–‡æœ¬": {
      description: {`Rust: \`result.text\` Â· Python: \`result.text\` Â· Node.js: \`result.text\``},
    },
    "æ€» token æ•°": {
      description: {`Rust: \`result.usage.total_tokens\` Â· Python: \`result.usage.total_tokens\` Â· Node.js: \`result.usage.totalTokens\``},
    },
    "å·¥å…·è°ƒç”¨æ¬¡æ•°": {
      description: {`Rust: \`result.tool_calls_count\` Â· Python: \`result.tool_calls_count\` Â· Node.js: \`result.toolCallsCount\``},
    },
  }
/>
