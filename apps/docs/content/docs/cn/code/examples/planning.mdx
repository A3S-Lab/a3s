---
title: è§„åˆ’
description: å¸¦ç›®æ ‡è¿½è¸ªçš„ä»»åŠ¡åˆ†è§£
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';

# è§„åˆ’

è§„åˆ’æ¨¡å¼åœ¨æ‰§è¡Œå‰å°†å¤æ‚æç¤ºåˆ†è§£ä¸ºç»“æ„åŒ–æ‰§è¡Œè®¡åˆ’ã€‚æ¯ä¸ªæ­¥éª¤ç‹¬ç«‹è¿½è¸ªï¼Œæ”¯æŒé¢å‘ç›®æ ‡çš„å¤šæ­¥éª¤ä»»åŠ¡ã€‚

<Callout type="info">
è§„åˆ’ä¼šé¢å¤–å¢åŠ ä¸€æ¬¡ LLM è°ƒç”¨æ¥ç”Ÿæˆè®¡åˆ’ã€‚é€‚ç”¨äºå¤æ‚çš„å¤šæ–‡ä»¶ä»»åŠ¡ï¼›ç®€å•æŸ¥è¯¢å¯è·³è¿‡ã€‚
</Callout>

## å¯ç”¨è§„åˆ’

<Tabs groupId="lang" items={['Rust', 'Python', 'Node.js']}>
<Tab value="Rust">
```rust
use a3s_code_core::{Agent, SessionOptions};

let opts = SessionOptions::new()
    .with_permissive_policy()
    .with_planning(true)
    .with_goal_tracking(true);

let session = agent.session("/my-project", Some(opts))?;

let result = session.send(
    "Add input validation to all API endpoints, write tests, and update the README",
    None,
).await?;

println!("{}", result.text);
println!("Tool calls: {}", result.tool_calls_count);
```

**è¿è¡Œï¼š** `cargo run --example agentic_loop_demo`
**æºç ï¼š** [`core/examples/agentic_loop_demo.rs`](https://github.com/A3S-Lab/Code/blob/main/core/examples/agentic_loop_demo.rs)
</Tab>
<Tab value="Python">
```python
session = agent.session("/my-project",
    permissive=True,
    planning=True,
    goal_tracking=True,
)

result = await session.send(
    "Add input validation to all API endpoints, write tests, and update the README"
)

print(result.text)
print(f"Tool calls: {result.tool_calls_count}")
```

**æºç ï¼š** [`sdk/python/examples/agentic_loop_demo.py`](https://github.com/A3S-Lab/Code/blob/main/sdk/python/examples/agentic_loop_demo.py)
</Tab>
<Tab value="Node.js">
```javascript
const session = agent.session('/my-project', {
  permissive: true,
  planning: true,
  goalTracking: true,
});

const result = await session.send(
  'Add input validation to all API endpoints, write tests, and update the README'
);

console.log(result.text);
console.log(`Tool calls: ${result.toolCallsCount}`);
```

**æºç ï¼š** [`sdk/node/examples/agentic_loop_demo.js`](https://github.com/A3S-Lab/Code/blob/main/sdk/node/examples/agentic_loop_demo.js)
</Tab>
</Tabs>

## æµå¼è§„åˆ’äº‹ä»¶

<Tabs groupId="lang" items={['Rust', 'Python', 'Node.js']}>
<Tab value="Rust">
```rust
let (mut rx, handle) = session.stream("Refactor and test the auth module", None).await?;

while let Some(event) = rx.recv().await {
    match event {
        AgentEvent::PlanningStart { prompt } => {
            println!("ğŸ“‹ Planning: {}", prompt);
        }
        AgentEvent::PlanReady { steps, .. } => {
            println!("Plan ({} steps):", steps.len());
            for (i, step) in steps.iter().enumerate() {
                println!("  {}. {}", i + 1, step);
            }
        }
        AgentEvent::End { .. } => break,
        _ => {}
    }
}
handle.await??;
```
</Tab>
<Tab value="Python">
```python
async for event in session.stream("Refactor and test the auth module"):
    t = event.get("type")
    if t == "planning_start":
        print(f"ğŸ“‹ Planning: {event['prompt']}")
    elif t == "plan_ready":
        print(f"Plan ({len(event['steps'])} steps):")
        for i, step in enumerate(event["steps"], 1):
            print(f"  {i}. {step}")
    elif t == "end":
        break
```
</Tab>
<Tab value="Node.js">
```javascript
for await (const event of stream) {
  if (event.type === 'planning_start') {
    console.log(`ğŸ“‹ Planning: ${event.prompt}`);
  } else if (event.type === 'plan_ready') {
    console.log(`Plan (${event.steps.length} steps):`);
    event.steps.forEach((step, i) => console.log(`  ${i + 1}. ${step}`));
  } else if (event.type === 'end') {
    break;
  }
}
```
</Tab>
</Tabs>

## API å‚è€ƒ

### SessionOptions

| é€‰é¡¹ | Rust | Python | Node.js | é»˜è®¤å€¼ |
|--------|------|--------|---------|---------|
| å¯ç”¨è§„åˆ’ | `.with_planning(true)` | `planning=True` | `planning: true` | `false` |
| å¯ç”¨ç›®æ ‡è¿½è¸ª | `.with_goal_tracking(true)` | `goal_tracking=True` | `goalTracking: true` | `false` |

### è§„åˆ’äº‹ä»¶

| äº‹ä»¶ | Rust å˜ä½“ | Python/Node.js `type` | å­—æ®µ |
|-------|-------------|----------------------|--------|
| è§„åˆ’å¼€å§‹ | `AgentEvent::PlanningStart` | `planning_start` | `prompt` |
| è®¡åˆ’ç”Ÿæˆ | `AgentEvent::PlanReady` | `plan_ready` | `steps[]`, `wave_count` |
| æ­¥éª¤å¼€å§‹ | `AgentEvent::StepStart` | `step_start` | `step`, `index` |
| æ­¥éª¤å®Œæˆ | `AgentEvent::StepEnd` | `step_end` | `step`, `index`, `success` |
| ç›®æ ‡æ›´æ–° | `AgentEvent::GoalUpdated` | `goal_updated` | `goal`, `status` |
