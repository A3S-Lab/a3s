---
title: MemoryItem
description: 记忆单元——字段、构建器 API 和记忆类型
---

import { TypeTable } from 'fumadocs-ui/components/type-table';

# MemoryItem

每条记忆都是一个 `MemoryItem`，使用链式 API 构建：

```rust
use a3s_memory::{MemoryItem, MemoryType};

let item = MemoryItem::new("Auth 使用 JWT，有效期 24 小时")
    .with_importance(0.9)
    .with_tag("auth")
    .with_tag("security")
    .with_type(MemoryType::Semantic)
    .with_metadata("source", "code-review");
```

## 字段

<TypeTable
  type={{
    id: { type: 'String', description: 'UUID，自动生成' },
    content: { type: 'String', description: '记忆文本内容' },
    memory_type: { type: 'MemoryType', description: '见下方说明' },
    importance: { type: 'f32', description: '0.0–1.0，自动截断' },
    tags: { type: 'Vec<String>', description: '分类标签' },
    metadata: { type: 'HashMap<String, String>', description: '任意键值对' },
    timestamp: { type: 'DateTime<Utc>', description: '创建时间' },
    access_count: { type: 'u32', description: '检索次数' },
    last_accessed: { type: 'Option<DateTime<Utc>>', description: '最近检索时间' },
  }}
/>

## 构建器方法

<TypeTable
  type={{
    ".with_importance(f32)": {
      description: "设置重要性，截断到 0.0–1.0",
    },
    ".with_tag(str)": {
      description: "追加单个标签",
    },
    ".with_tags(Vec<String>)": {
      description: "替换所有标签",
    },
    ".with_type(MemoryType)": {
      description: "设置记忆类型",
    },
    ".with_metadata(key, value)": {
      description: "插入元数据键值对",
    },
  }}
/>

## 记忆类型

<TypeTable
  type={{
    "Episodic": {
      description: "用途: 特定事件和交互 · 典型重要性: 0.5",
    },
    "Semantic": {
      description: "用途: 事实和领域知识 · 典型重要性: 0.5–0.8",
    },
    "Procedural": {
      description: "用途: 成功的操作模式 · 典型重要性: 0.8",
    },
    "Working": {
      description: "用途: 当前任务的活跃上下文 · 典型重要性: 不固定",
    },
  }}
/>
