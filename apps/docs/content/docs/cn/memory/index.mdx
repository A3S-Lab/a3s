---
title: A3S Memory
description: 可插拔的 AI Agent 记忆存储 — MemoryStore trait、FileMemoryStore、InMemoryStore 和相关性评分
---

import { Callout } from 'fumadocs-ui/components/callout';

# A3S Memory

`a3s-memory` 是一个独立的 Rust crate，提供 Agent 记忆的存储层。它不了解 Agent、会话或上下文注入——它只负责一件事：存储和检索 `MemoryItem`。

```
核心（稳定）                      扩展（可替换）
─────────────────────────       ─────────────────────────
MemoryStore (trait)             InMemoryStore
MemoryItem                      FileMemoryStore
MemoryType                      （你的自定义后端）
RelevanceConfig
```

## 安装

```toml
[dependencies]
a3s-memory = "0.1"
```

如果你在使用 A3S Code，记忆功能已内置，通过 `SessionOptions` 配置即可：

```rust
SessionOptions::new().with_file_memory("./memory")
```

## 本 crate 包含的内容

| 类型 | 说明 |
|------|------|
| `MemoryStore` | 异步 trait — 实现或依赖的唯一接口 |
| `MemoryItem` | 记忆的基本单元 — 内容、重要性、标签、元数据、时间戳 |
| `MemoryType` | `Episodic`、`Semantic`、`Procedural`、`Working` |
| `RelevanceConfig` | 评分参数 — 衰减、重要性权重、时效性权重 |
| `InMemoryStore` | 基于 `tokio::sync::RwLock` 的临时后端 |
| `FileMemoryStore` | 持久化后端 — 原子写入、内存索引、索引重建 |

## 本 crate 不包含的内容

| 关注点 | 所在位置 |
|--------|----------|
| 三层会话记忆（工作/短期/长期） | `a3s-code` |
| `MemoryConfig`（max_short_term、max_working） | `a3s-code` |
| 上下文注入到 Agent 提示词 | `a3s-code` |

<Callout type="info">
如果你在用 A3S Code 构建 Agent，请查看 [记忆系统](/cn/docs/code/memory) 了解完整的 Agent 层文档。
</Callout>
