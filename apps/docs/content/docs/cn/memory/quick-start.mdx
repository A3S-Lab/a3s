---
title: 快速开始
description: 10 行代码内存储和检索记忆
---

# 快速开始

## 添加依赖

```toml
[dependencies]
a3s-memory = "0.1"
tokio = { version = "1", features = ["rt-multi-thread", "macros"] }
```

## 存储与搜索

```rust
use a3s_memory::{InMemoryStore, MemoryItem, MemoryStore, MemoryType};
use std::sync::Arc;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let store = Arc::new(InMemoryStore::new());

    store.store(
        MemoryItem::new("文件 I/O 优先使用 write_all 而非 write")
            .with_importance(0.8)
            .with_tag("rust")
            .with_type(MemoryType::Semantic),
    ).await?;

    let results = store.search("文件 I/O", 5).await?;
    println!("{}", results[0].content);

    Ok(())
}
```

## 持久化到磁盘

```rust
use a3s_memory::{FileMemoryStore, MemoryItem, MemoryStore};

let store = FileMemoryStore::new("./memory").await?;

store.store(MemoryItem::new("通过 `just release` 发布").with_importance(0.9)).await?;

// 进程重启后仍可恢复——重新构造实例即可：
let store = FileMemoryStore::new("./memory").await?;
assert_eq!(store.count().await?, 1);
```
